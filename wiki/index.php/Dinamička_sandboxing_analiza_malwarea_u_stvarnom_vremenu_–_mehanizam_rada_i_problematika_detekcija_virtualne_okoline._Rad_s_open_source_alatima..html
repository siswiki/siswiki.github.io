<!DOCTYPE html>
<html lang="hr" dir="ltr">
<head>
<meta charset="UTF-8" />
<title>Dinamička sandboxing analiza malwarea u stvarnom vremenu – mehanizam rada i problematika detekcija virtualne okoline. Rad s open source alatima. - SIS Wiki</title>
<meta name="generator" content="MediaWiki 1.17.0" />
<link rel="shortcut icon" href="http://security.foi.hr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="../opensearch_desc.php" title="SIS Wiki (hr)" />
<link rel="EditURI" type="application/rsd+xml" href="../api.php%3Faction=rsd" />
<link title="Creative Commons" type="application/rdf+xml" href="http://security.foi.hr/wiki/index.php?title=Dinami%C4%8Dka_sandboxing_analiza_malwarea_u_stvarnom_vremenu_%E2%80%93_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima.&amp;action=creativecommons" rel="meta" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="SIS Wiki Atom izvor" href="../index.php%3Ftitle=Posebno:Nedavne_promjene&amp;feed=atom" />
<link rel="stylesheet" href="../load.php%3Fdebug=false&amp;lang=hr&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cskins.vector&amp;only=styles&amp;skin=vector&amp;*.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/wiki/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr ns-0 ns-subject page-Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline_Rad_s_open_source_alatima skin-vector">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<!-- content -->
		<div id="content">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading">Dinamička sandboxing analiza malwarea u stvarnom vremenu – mehanizam rada i problematika detekcija virtualne okoline. Rad s open source alatima.</h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
				<!-- tagline -->
				<div id="siteSub">Izvor: SIS Wiki</div>
				<!-- /tagline -->
				<!-- subtitle -->
				<div id="contentSub"></div>
				<!-- /subtitle -->
																<!-- jumpto -->
				<div id="jump-to-nav">
					Skoči na: <a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#mw-head">orijentacija</a>,
					<a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#p-search">traži</a>
				</div>
				<!-- /jumpto -->
								<!-- bodytext -->
				<p>Članovi tima: <br />
</p><p>Marko Bartolić <br />
Rene Škuljević <br />
Domagoj Vuljak <br />
--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Marko.bartolic&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Marko.bartolic (stranica ne postoji)">Marko.bartolic</a> 19:54, 11. studenog 2015. (CET)
</p><p><br />
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Sadržaj</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#Uvod"><span class="tocnumber">1</span> <span class="toctext">Uvod</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#Cuckoo_Sandbox"><span class="tocnumber">2</span> <span class="toctext">Cuckoo Sandbox</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#Na.C4.8Din_rada"><span class="tocnumber">3</span> <span class="toctext">Način rada</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#Instalacija_i_konfiguracija"><span class="tocnumber">4</span> <span class="toctext">Instalacija i konfiguracija</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#Konfiguracija_virtualne_ma.C5.A1ine"><span class="tocnumber">4.1</span> <span class="toctext">Konfiguracija virtualne mašine</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#Konfiguracija_Cuckoo-a"><span class="tocnumber">4.2</span> <span class="toctext">Konfiguracija Cuckoo-a</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#Pokretanje"><span class="tocnumber">5</span> <span class="toctext">Pokretanje</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#Cuckoo_Hardening"><span class="tocnumber">6</span> <span class="toctext">Cuckoo Hardening</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#Analiza_malicoznih_kodova"><span class="tocnumber">7</span> <span class="toctext">Analiza malicoznih kodova</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#SpyEye"><span class="tocnumber">7.1</span> <span class="toctext">SpyEye</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#Carberp"><span class="tocnumber">7.2</span> <span class="toctext">Carberp</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#Zaklju.C4.8Dak"><span class="tocnumber">8</span> <span class="toctext">Zaključak</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#Literatura"><span class="tocnumber">9</span> <span class="toctext">Literatura</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Uvod"> Uvod </span></h2>
<p>Malware je maliciozni kod namijenjen da načini štetu operacijskom sustavu ili krađi podataka korisnika i poduzeća. Sandbox je sigurnosni mehanizam  kreiran od strane korisnika. Predstavlja virtualno okruženje koje je izolirano od ostatka sustava te štiti OS i podatke na računalu od slučajno ili namjerno kreiranih štetnih programa. Sandbox spada u dinamičku analizu, te je jedna od najčešće korištenih tehnika testiranja štetnog software-a  i datoteka. Dinamička analiza se izvodi tako da se maliciozni kod pokrene, te se prati njegovo ponašanje.
U sandbox sustavima se izvršavaju i testiraju razne aplikacije, web adrese, web postavke, onemogučavajući pristup koji bi mogao biti štetan za računalo. Ograničava se pristup određenim resursima računala poput memorije računala , te spriječava da se ugroze bilo koje ostale komponente računala. Sadbox simulira rad računala te omogućava da se u tom okružju testira i prati kretanje sumnjivih programa, bez opasnosti od ugrožavanja ostalih dijelova računala. Sadbox štiti i servere i podatke koji se nalaze na serveru te štiti i sustave za distribuciju programskog koda koji su povezani sa tim sustavom kako se nebi zarazili pri analizi.
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Rskuljev&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Rskuljev (stranica ne postoji)">Rskuljev</a> 20:58, 17. siječnja 2016. (CET)
</p>
<h2> <span class="mw-headline" id="Cuckoo_Sandbox"> Cuckoo Sandbox </span></h2>
<p><b>Povijest</b>
</p><p>Claudio Guarnieri je glavni začetnik i voditelj projekta „Google Summer of Code“ na kojem je 2010. godine krenulo razvijanje Cuckoo Sandboxa. Prvo beta izdanje programa je objavljeno u svibnju 2011.godine i tada je prvi put distrbuiran za širu javnost. Prva stabilna verzija Cuckoo Sandboxa (verzija 0.2) puštena je u javnost u studenom 2011. godine. Cuckoo početkom 2012. godine objavljuje Malwr.com, odnosno online verziju Cuckoo Sandbox-a sa potpuno integriranim korisničkim sučeljem. Na Malwr.com korisnici mogu analizirati neku datoteku i dobiti povratne informacije o njenoj sigurnosti.
</p><p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Cuckoo1.png" class="image"><img alt="Cuckoo1.png" src="../images/2/2b/Cuckoo1.png" width="500" height="161" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Cuckoo logo</div>  
<p><br />
<b>Općenito:</b>
</p><p>Cuckoo Sandbox je open source sustav za dinamičku analizu malwarea, exploita i raznih ostalih sumnjivih datoteka. Dinamička analiza prati i pokreće maliciozni kod u realnom vremenu i najčešće nekom virtualnom okruženju kako bi se kasnije mogla odraditi i statička analiza malicioznog koda. Cuckoo Sandbox koristi razne komponente kako bi se analiziralo ponašanje štetnih procesa kod izvršavanja u okolini koja je izolirana i sigurna. 
Cuckoo Sandbox može analizirati mnoge datoteke kao što su: 
</p>
<ul><li> DLL datoteke, 
</li><li> PDF dokumente,
</li><li> PHP skripte,
</li><li> CPL datoteke,
</li><li> ZIP datoteke, 
</li><li> izvršne Windows datoteke i mnoge druge.
</li></ul>
<p>Nakon analize, Cuckoo može rezultate prikazivati u različitim oblicima izvješća (JSON izvješće, HTML izvješće, MAEC izvješće, MongoDB i HPFeeds).
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Dvuljak&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Dvuljak (stranica ne postoji)">Dvuljak</a> 20:53, 17. siječnja 2016. (CET)
</p>
<h2> <span class="mw-headline" id="Na.C4.8Din_rada"> Način rada </span></h2>
<p>Način rada Cuckoo-a je u teoriji zapravo jednostavan. Na Linux hostu se napravi virtualna mašina sa Windows guestom. Cuckoo je zapravo niz Python skripti koje prate rad procesa i sustava tijekom izvođenja nekog koda. Prvo se snimi stanje sustava na početku procesa kako bi mogao uočiti promjene na kraju nakon pokretanja programa. Nakon što je snimanje sustava završeno, pokreću se sumnjivi programi, nadgledaju te se snima i istražuju promjene koje je taj program uzrokovao svojim izvršavanjem. Sve razlike koje se uoče na kraju predstavljaju maliciozne aktivnosti programa. Cuckoo je modularno dizajniran kako bi se jednostavnije integrirao u sustave, bilo kao samostalna aplikacija ili kao dio neke okoline. Svaka nova analiza se izvršava u novo pokrenutoj izoliranoj virtualnoj mašini kako bi se jasno moglo uočiti i zabilježiti sve promjene koje nastanu. 
Cuckoo se pokreće na Linux OS sa svim potrebnim dodacima. Postoji glavni host uređaj, te guest, virtualna mašina u kojoj se nalazi određeni operacijski sustav. Glavni host izvršava komponente sandbox-a koje stvaraju analizu sustava, a virtualna mašina je izolirano, sigurno okružje u kojem se pokreće malware i dopušta mu se da načini štetu kako bismo ga mogli analizirati.
</p><p>Cuckoo može pokrenuti open-source alat "Volatility" koji služi za analizu memorije.
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Rskuljev&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Rskuljev (stranica ne postoji)">Rskuljev</a> 20:58, 17. siječnja 2016. (CET)
</p>
<h2> <span class="mw-headline" id="Instalacija_i_konfiguracija">Instalacija i konfiguracija</span></h2>
<p>Pošto je za rad Cuckoo-a potreban Linux host, odabrali smo Elementary OS distribuciju, koja je bazirana na Ubuntu-u. Kao guest OS koristit ćemo Windows XP SP3.
Cuckoo za svoj rad treba podosta raznih biblioteka. Prvo je potrebno instalirati sljedeće Python biblioteke:
</p>
<pre>      <code>
       sudo apt-get install python
       sudo apt-get install python python-dev python-sqlalchemy python-bson
      </code>
</pre>
<p>Od ostalih značajki potrebno je:
</p>
<ul><li>MongoDB - za korištenje Django based web sučelja
</li><li>Dpkt - za izdvajanje informacija iz PCAP fileova
</li><li>Jinja2 - za prikaz HTML reportova i web sučelje
</li><li>Magic - govori kakvi podaci su u datoteci prije njenog otvaranja
</li><li>PeFile - za statičku analizu Portable Executable (PE) datoteka
</li><li>Bottle - omogućuje korištenje web.py i api.py 
</li></ul>
<p>Njih možemo instalirati izvršavanjem sljedeće naredbe.
</p>
<pre>      <code>
      sudo apt-get install mongodb python-dpkt python-jinja2 python-magic python-pefile python-bottle 
      </code>
</pre>
<p>Dalje je potrebno instalirati Ssdeep i Pydeep, koji se koriste za računanje fuzzy hash-eva. Ssdeep je potrebno preuzeti sa linka <a href="http://sourceforge.net/projects/ssdeep/files/ssdeep-2.10/ssdeep-2.10.tar.gz/download" class="external free" rel="nofollow">http://sourceforge.net/projects/ssdeep/files/ssdeep-2.10/ssdeep-2.10.tar.gz/download</a> . Ovakav kompresirani file možemo raspakirati i instalirati na sljedeći način:
</p>
<pre>      <code>
      tar xvfz ssdeep-2.10.tar.gz
      cd ssdeep-2.10
      ./configure
      make
      make check
      sudo make install
      </code>
</pre>
<p>Pydeep možemo instalirati sa:
</p>
<pre>      <code>
      wget <a href="https://github.com/kbandla/pydeep/archive/master.zip" class="external free" rel="nofollow">https://github.com/kbandla/pydeep/archive/master.zip</a>
      unzip master.zip
      cd pydeep-master
      python setup.py build
      sudo python setup.py install
      </code>
</pre>
<p>Dalje su nam potrebne Yara i njezine pomoćne biblioteke. Yara je alat koji omogućuje identifikaciju i klasifikaciju uzorka malwarea na temelju stringova i obrazaca identificiranih u uzorku.
</p>
<pre>      <code>
      sudo apt-get install libpcre3 libpcre3-dev
      sudo apt-get install autoconf
      sudo apt-get install libtool
      wget <a href="https://github.com/plusvic/yara/archive/v3.3.0.tar.gz" class="external free" rel="nofollow">https://github.com/plusvic/yara/archive/v3.3.0.tar.gz</a>
      tar zxf v3.3.0.tar.gz
      cd yara-3.3.0
      ./bootstrap.sh
      ./configure
      make
      sudo make install
      cd yara-python
      python setup.py build
      sudo python setup.py install
      </code>
</pre>
<p>Još nam je potreban TCPDump za hvatanje i analizu mrežnog prometa prilikom pokretanja malware-a. 
</p>
<pre>      <code>
      sudo apt-get install tcpdump
      sudo chmod +s /usr/sbin/tcpdump
      sudo apt-get install libcap2-bin
      sudo setcap cap_net_raw,cap_net_admin=eip /usr/sbin/tcpdump
      </code>
</pre>
<p>To bi bile sve biblioteke koje su potrebne za rad samog Cuckoo-a. Sljedeći korak je instalacija i podešavanje virtualne mašine. Cuckoo može funkcionirati s bilo kojim alatom za virtualizaciju, ali u službenoj dokumentaciji preporuča se korištenje VirtualBox-a, pa ćemo taj alat i mi koristiti. Nakon instalacije VirtualBox-a, potrebno je dodati novog korisnika, nazvat ćemo ga "cuckoo" i omogućiti mu pristup virtualnim mašinama.
</p>
<pre>      <code>
      sudo apt-get install virtualbox
      sudo adduser cuckoo
      sudo usermod -G vboxusers cuckoo
      </code>
</pre>
<p>Sada možemo preuzeti Cuckoo arhivu. Poželjno je kreirati zaseban direktorij na disku gdje će se pohranjivati svi podaci vezani uz Cuckoo. Cuckoo možemo preuzeti direktno sa stranice <a href="https://www.cuckoosandbox.org/download.html" class="external free" rel="nofollow">https://www.cuckoosandbox.org/download.html</a> ili putem terminala:
</p>
<pre>      <code>
      sudo wget <a href="https://github.com/cuckoobox/cuckoo/archive/master.zip" class="external free" rel="nofollow">https://github.com/cuckoobox/cuckoo/archive/master.zip</a>
      </code>
</pre>
<p><br />
</p>
<h3> <span class="mw-headline" id="Konfiguracija_virtualne_ma.C5.A1ine"> Konfiguracija virtualne mašine </span></h3>
<p>Sada možemo postaviti virtualnu mašinu. Budući da velika većina današnjeg malware-a zahvaća Windows operacijske sustave, kao "gost" operacijski sustav preporuča se instalacija neke verzije Windows operacijskog sustava. Ovdje ćemo koristiti 32-bitnu verziju Windows XP sa Service Packom 3. Ovdje nećemo opisivati postupak konfiguracije i instalacije virtualne mašine budući da je instalacija identična normalnoj instalaciji na običnom računalu, a dokumentacija vezana uz to lako dostupna na internetu. 
</p><p>Prilikom konfiguracije virtualne mašine potrebno je upamtiti naziv koji se zadaje virtualnoj mašini, jer će nam taj podatak kasnije biti potreban. U našem slučaju naziv virtualne mašine je "Cuckoo". Postoji nekoliko stvari koje je potrebno instalirati na gost operacijski sustav (virtualnu mašinu) kako bi Cuckoo ispravno radio. Potreban nam je Python i Python Imaging Library jer je Cuckoo zapravo skup Python modula.
</p><p>U virtualnoj mašini je potrebno instalirati Python koji se može preuzeti sa <a href="https://www.python.org/downloads/" class="external free" rel="nofollow">https://www.python.org/downloads/</a> .
Python Imaging Library se može preuzeti sa <a href="http://www.pythonware.com/products/pil/" class="external free" rel="nofollow">http://www.pythonware.com/products/pil/</a> .
</p><p>Nadalje je potrebno pronaći direktorij "agent" unutar Cuckoo direktorija. Unutar "agent" direktorija nalazi se "agent.py" datoteka koju je potrebno prebaciti na virtualnu mašinu na proizvoljan način. Također, preporuča se stavljanje te datoteke unutar "Windows Startup" direktorija kako bi se ta Python skripta izvodila prilikom svakog pokretanja virtualne mašine. Ova skripta treba uvijek biti pokrenuta kako bi Cuckoo mogao ispravno raditi.
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Win_startup_agent.png" class="image" title="Agent.py postavljen unutar Windows Startup direktorija"><img alt="Agent.py postavljen unutar Windows Startup direktorija" src="../images/thumb/9/9a/Win_startup_agent.png/500px-Win_startup_agent.png" width="500" height="245" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Agent.py postavljen unutar Windows Startup direktorija</div>  
<p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Py_pokrenut.png" class="image" title="Agent.py pokrenut"><img alt="Agent.py pokrenut" src="../images/thumb/7/7b/Py_pokrenut.png/500px-Py_pokrenut.png" width="500" height="245" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Agent.py pokrenut</div>  
<p><br />
</p><p>Sljedeći koraci nisu obavezni, ali se preporučaju budući da se radi o gašenju sigurnosnih aspekata virtualne mašine kako bi analiza malware bila jednostavnija, te kako se oni ne bi nepotrebno upletali u analizu.
</p><p>1) Potrebno je ugasiti Windows Firewall (vatrozid).
</p><p><br />
2) Potrebno je ugasiti Automatic Updates (automatska ažuriranja).
</p><p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Win_firewall.png" class="image" title="Ugašen Windows Firewall i Automatic Updates"><img alt="Ugašen Windows Firewall i Automatic Updates" src="../images/thumb/9/95/Win_firewall.png/500px-Win_firewall.png" width="500" height="245" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Ugašen Windows Firewall i Automatic Updates</div>  
<p><br />
3) Zadnji korak je ugasiti i onemogućiti pokretanje servisa za Windows Firewall i Automatic Updates.
</p><p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Startup.png" class="image" title="Navigacija do servisa"><img alt="Navigacija do servisa" src="../images/2/28/Startup.png" width="500" height="699" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Navigacija do servisa</div>  
<p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Run_services.png" class="image" title="Pokretanje kontrole servisa"><img alt="Pokretanje kontrole servisa" src="../images/9/9c/Run_services.png" width="500" height="266" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Pokretanje kontrole servise</div>  
<p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Services_firewall.png" class="image" title="Servis koji želimo ugasiti"><img alt="Servis koji želimo ugasiti" src="../images/thumb/b/ba/Services_firewall.png/500px-Services_firewall.png" width="500" height="245" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Servis koji želimo ugasiti</div>  
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Services_ugasi.png" class="image" title="Gašenje servisa i njegovog automatskog pokretanja"><img alt="Gašenje servisa i njegovog automatskog pokretanja" src="../images/thumb/b/bd/Services_ugasi.png/500px-Services_ugasi.png" width="500" height="245" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Gašenje servisa i njegovog automatskog pokretanja</div>  
<p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Services_update.png" class="image" title="Isti postupak ponovimo i za ovaj servis"><img alt="Isti postupak ponovimo i za ovaj servis" src="../images/thumb/a/a2/Services_update.png/500px-Services_update.png" width="500" height="245" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Isti postupak ponavljamo i za ovaj servis</div>  
<p><br />
Sada slobodno možete na virtualnu mašinu instalirat još neke dodatne programe koje smatrate da će vam biti potrebni, poput Microsoft Office, čitača PDF dokumenata ili slično. Ovdje to nećemo pokazivati budući da nama nisu bili potrebni nikakvi dodatni programi.
</p><p>Dalje je potrebno konfigurirati mrežne postavke na virtualnoj mašini. Ovaj korak je važan zato što virtualna mašina za povezivanje mora imati statičku IP adresu, te za pravilnu komunikaciju Cuckoo-a sa virtualnom mašinom.
</p><p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Network_settings.png" class="image" title="Postavljanje IP adrese virtualne mašine"><img alt="Postavljanje IP adrese virtualne mašine" src="../images/thumb/2/25/Network_settings.png/500px-Network_settings.png" width="500" height="245" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Postavljanje IP adrese virtualne mašine</div>  
<p><br />
Sada je najbolje vrijeme da se napravi snapshot virtualne mašine, kako bi se sačuvale sve promjene koje smo dosada napravili. VAŽNO - datoteka "agent.py" mora biti pokrenuta tijekom uzimanja snapshota.
</p><p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Snapshot_1.png" class="image" title="Snapshot virtualne mašine"><img alt="Snapshot virtualne mašine" src="../images/thumb/3/3d/Snapshot_1.png/500px-Snapshot_1.png" width="500" height="281" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Snapshot virtualne mašine</div>  
<p><br />
</p>
<h3> <span class="mw-headline" id="Konfiguracija_Cuckoo-a"> Konfiguracija Cuckoo-a </span></h3>
<p>Za konfiguraciju samog Cuckoo-a, putem terminala je potrebno napraviti forward paketa.
</p>
<pre>     <code>
     sudo iptables -A FORWARD -o eth0 -i vboxnet0 -s 192.168.56.0/24 -m conntrack --ctstate NEW -j ACCEPT
     sudo iptables -A FORWARD -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT
     sudo iptables -A POSTROUTING -t nat -j MASQUERADE
     sudo sysctl -w net.ipv4.ip_forward=1
     sudo sysctl -p
     </code>
</pre>
<p><br />
Sada je potrebno konfigurirati sljedeće Cuckoo datoteke. One se mogu pronaći u direktoriju "conf". Napomena: ovdje nećemo prikazivati puni sadržaj tih datoteka, nego samo one njihove dijelove koje je potrebno izmijeniti.
</p>
<ul><li>auxiliary.conf
</li><li>cuckoo.conf
</li><li>kvm.conf
</li><li>virtualbox.conf
</li></ul>
<p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Conf_fajlovi.png" class="image" title="Lokacija konfiguracijskih datoteka"><img alt="Lokacija konfiguracijskih datoteka" src="../images/thumb/5/53/Conf_fajlovi.png/500px-Conf_fajlovi.png" width="500" height="384" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Lokacija konfiguracijskih datoteka</div>  
<p><br />
</p>
<pre>     <code><b>auxiliary.conf</b>
     [sniffer]
     # Enable or disable the use of an external sniffer (tcpdump) [yes/no].
     enabled = yes
     # Specify the path to your local installation of tcpdump. Make sure this
     # path is correct.
     tcpdump = /usr/sbin/tcpdump
     # Specify the network interface name on which tcpdump should monitor the
     # traffic. Make sure the interface is active.
     interface = vboxnet0
     # Specify a Berkeley packet filter to pass to tcpdump.
     # bpf = not arp
     </code>
</pre>
<p>Pod "interface" je potrebno upisati mrežno sučelje koje će TCPDump pratiti, Virtualbox najčešće  stvara sučelje s nazivom "vboxnet0". Dalje je potrebno promijeniti lokaciju TCPDump-a. Lokaciju TCPDump-a provjerite sljedećom naredbom, te rezultat upišite na odgovarajuće mjesto.
</p>
<pre>     <code>
     locate tcpdump
     </code>
</pre>
<p><br />
</p>
<pre>     <code><b>cuckoo.conf</b>
     # Specify the name of the machinery module to use, this module will
     # define the interaction between Cuckoo and your virtualization software
     # of choice.
     machinery = virtualbox
     # Enable creation of memory dump of the analysis machine before shutting
     # down. Even if turned off, this functionality can also be enabled at
     # submission. Currently available for: VirtualBox and libvirt modules (KVM).
     memory_dump = on
     [resultserver]
     # The Result Server is used to receive in real time the behavioral logs
     # produced by the analyzer.
     # Specify the IP address of the host. The analysis machines should be able
     # to contact the host through such address, so make sure it's valid.
     # NOTE: if you set resultserver IP to 0.0.0.0 you have to set the option
     # `resultserver_ip` for all your virtual machines in machinery configuration.
     ip = 192.168.56.1
     </code>
</pre>
<p>Ovdje je potrebno navesti softver za virtualizaciju koji se koristi, te uključiti dump-ove memorije. Unutar odjeljka "resultserver" pod IP adresu je potrebno navesti onu IP adresu koju smo ručno konfigurirali unutar virtualne mašine.
</p>
<pre>     <code><b>kvm.conf</b>
     [kvm]
     # Specify a comma-separated list of available machines to be used. For each
     # specified ID you have to define a dedicated section containing the details
     # on the respective machine. (E.g. cuckoo1,cuckoo2,cuckoo3)
     machines = Cuckoo
     [Cuckoo]
     # Specify the label name of the current machine as specified in your
     # libvirt configuration.
     label = Cuckoo
     # Specify the operating system platform used by current machine
     # [windows/darwin/linux].
     platform = windows
     # Specify the IP address of the current virtual machine. Make sure that the
     # IP address is valid and that the host machine is able to reach it. If not,
     # the analysis will fail. You may want to configure your network settings in
     # /etc/libvirt/&lt;hypervisor&gt;/networks/
     ip = 192.168.56.101
     </code>
</pre>
<p>U ovoj datoteci je potrebno upisati ime virtualne mašine koju će Cuckoo koristiti (u našem slučaju ime je "Cuckoo"). Kao platformu koju koristi virtualna mašina navodimo "windows", te statičku IP adresu virtualne mašine.
</p><p><br />
</p>
<pre>     <code><b>virtualbox.conf</b>
     # Path to the local installation of the VBoxManage utility.
     path = /usr/bin/VBoxManage
     # Specify a comma-separated list of available machines to be used. For each
     # specified ID you have to define a dedicated section containing the details
     # on the respective machine. (E.g. cuckoo1,cuckoo2,cuckoo3)
     machines = Cuckoo
     [Cuckoo]
     # Specify the label name of the current machine as specified in your
     # VirtualBox configuration.
     label = Cuckoo
     # Specify the operating system platform used by current machine
     # [windows/darwin/linux].
     platform = windows
     # Specify the IP address of the current virtual machine. Make sure that the
     # IP address is valid and that the host machine is able to reach it. If not,
     # the analysis will fail.
     ip = 192.168.56.101
     </code>
</pre>
<p>U zadnjoj datoteci koju uređujemo potrebno je opet obratiti pažnju da kao naziv virtualne mašine opet navedemo "Cuckoo", platformu "windows", te istu IP adresu kao i prethodnoj datoteci. Dalje, potrebno je navesti putanju do "VBoxManage" instalacije, koju možemo provjeriti sljedećom naredbom.
</p>
<pre>     <code>
     locate VBoxManage
     </code>
</pre>
<p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Vboxmanage.png" class="image" title="Provjera putanje VBoxManage instalacije"><img alt="Provjera putanje VBoxManage instalacije" src="../images/thumb/c/c7/Vboxmanage.png/500px-Vboxmanage.png" width="500" height="270" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Provjera putanje VBoxManage instalacije</div>  
<p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:12207671_10205354799364916_2005239733_n.jpg" class="image"><img alt="12207671 10205354799364916 2005239733 n.jpg" src="../images/thumb/7/72/12207671_10205354799364916_2005239733_n.jpg/500px-12207671_10205354799364916_2005239733_n.jpg" width="500" height="392" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Izgled sustava</div>  
<p><br />
Ovo bi trebalo biti sve što se tiče konfiguriranja, te sada možemo pokrenuti Cuckoo.
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Marko.bartolic&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Marko.bartolic (stranica ne postoji)">Marko.bartolic</a> 06:03, 18. siječnja 2016. (CET)
</p>
<h2> <span class="mw-headline" id="Pokretanje">Pokretanje</span></h2>
<p>Za pokretanje Cuckoo-a prvo je potrebno otvoriti VirtualBox i pokrenuti virtualnu mašinu koju smo konfigurirali za analizu. Tada je potrebno kroz terminal otvoriti direktorij gdje se nalazi Cuckoo i pokrenuti ga sljedećom naredbom.
</p>
<pre>     <code>
     ./cuckoo.py
     </code>
</pre>
<p><br />
Prilikom pokretanja Cuckoo provjerava ima li novijih ažuriranja, javlja koji alat za virtualizaciju će koristiti, te koliko virtualnih mašina je pronađeno. Kada je Cuckoo spreman za analizu, pojavljuje se poruka "Waiting for analysis tasks".
</p><p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Cuckoo_pokrenut.png" class="image" title="Pokretanje Cuckoo-a"><img alt="Pokretanje Cuckoo-a" src="../images/thumb/d/d6/Cuckoo_pokrenut.png/500px-Cuckoo_pokrenut.png" width="500" height="281" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Pokretanje Cuckoo-a</div>  
<p><br />
Cuckoo je sada spreman za analizu datoteka ili URL-ova. Datoteke su prosljeđuju na način da kroz terminal dođemo do direktorija "utils" unutar Cuckoo-a te upišemo sljedeću naredbu. Iza naredbe je potrebno navesti punu putanju do datoteke koju želimo analizirati.
</p>
<pre>     <code>
     ./submit.py /putanja/do/datoteke
     </code>
</pre>
<p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Submit_parametri.png" class="image" title="Cuckoo submit parametri"><img alt="Cuckoo submit parametri" src="../images/thumb/a/ad/Submit_parametri.png/500px-Submit_parametri.png" width="500" height="175" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Cuckoo submit parametri</div>  
<p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Submit_primjer.png" class="image"><img alt="Submit primjer.png" src="../images/thumb/2/22/Submit_primjer.png/500px-Submit_primjer.png" width="500" height="44" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Primjer prosljeđivanja datoteke</div>  
<p><br />
Cuckoo tada javlja ukoliko je zadatak uspješno dodan, te se tada pokreće analiza datoteke, a preko python agenta se može pratiti napredak. Rezultat analize možemo pogledati u direktoriju "Cuckoo -&gt; storage -&gt; analyses -&gt; #". Cuckoo također radi detaljna izvješća koja je moguće pregledati putem web sučelja, poput screenshotova ekrana ukoliko analizirana datoteka ima grafičko sučelje, ispis mrežnih povezivanja koje je moguće pregledati alatom Wireshark, itd. Ta izvješća se mogu vidjeti da kroz terminal navigiramo do direktorija "utils" i upišemo 
</p>
<pre>     <code>
     ./web.py
     </code>
</pre>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Cuckoo_skenira.png" class="image"><img alt="Cuckoo skenira.png" src="../images/thumb/a/a4/Cuckoo_skenira.png/500px-Cuckoo_skenira.png" width="500" height="281" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Izvođenje analize</div>  
<p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Lokacija_lokalnih.png" class="image"><img alt="Lokacija lokalnih.png" src="../images/thumb/c/cb/Lokacija_lokalnih.png/500px-Lokacija_lokalnih.png" width="500" height="384" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Lokacija lokalnih datoteka analize</div>  
<p><br />
Tada nam Cuckoo prikazuje URL putem kojega možemo pristupiti web sučelju sa detaljnim izvješćima analizirane datoteke.
</p><p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Web_py_url.png" class="image"><img alt="Web py url.png" src="../images/thumb/c/cb/Web_py_url.png/500px-Web_py_url.png" width="500" height="137" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">URL za pristup web sučelju</div>  
<p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Online_analiza.png" class="image"><img alt="Online analiza.png" src="../images/thumb/1/1f/Online_analiza.png/500px-Online_analiza.png" width="500" height="281" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Izvođenje analize</div>  
<p><br />
Na kraju, unutar direktorija "log" možemo vidjeti datoteku "cuckoo.log" gdje se ispisuju sve poruke i obavijesti koje Cuckoo javlja tijekom svojeg rada.
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Marko.bartolic&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Marko.bartolic (stranica ne postoji)">Marko.bartolic</a> 06:03, 18. siječnja 2016. (CET)
</p>
<h2> <span class="mw-headline" id="Cuckoo_Hardening"> Cuckoo Hardening </span></h2>
<p>Razvoj tehnologije Cuckoo nam omogućuje analizu malware-a bez opasnosti od zaraze sustava i štete. Ipak, neki malware može detektirati ukoliko se nalazi unutar virtualne okoline i promijeniti svoje ponašanje ili uopće ne raditi ništa, kako bi prevario osobu koja ga analizira i naveo da misli kako taj kod zapravo nije zloćudan.
Nakon analize malicioznog koda, rezultati analize u obliku izvještaja se pohranjuju na stranicu Malwr.com i VirusTotal. Problem koji se ovdje javlja ovdje je taj da su analizirani maliciozni kodovi javno dostupni svima, pa tako i autorima tih kodova. Oni preko tih analiza mogu izmijeniti kod kako bi on i dalje vršio zloćudne radnje i bio nevidljiv za Cuckoo Sandbox i ostale sustave za analizu malicioznog koda.
Kao odgovor na ovaj problem javlja se Cuckoo Hardening, odnosno proces „ojačavanja“ virtualne mašine od malicioznih kodova koji otkrivaju da li se izvode unutar virtualne mašine. Budući da je Cuckoo open-source, GitHub korisnik Mark Doe je napravio dll patch "cuckoomon.dll" koji čini virtualnu mašinu teže uočljivu za maliciozni kod. Dll se može preuzeti sa: <a href="https://github.com/markedoe/cuckoo-sandbox/blob/master/cuckoomon.dll" class="external autonumber" rel="nofollow">[1]</a>
Potrebno je preimenovati originalnu datoteku "cuckoomon.dll" u neki drugi naziv, npr "original_cuckoo.dll", a ovaj novi dll preuzeti i staviti u taj direktorij.
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Hardening_dll.png" class="image"><img alt="Hardening dll.png" src="../images/thumb/f/f1/Hardening_dll.png/500px-Hardening_dll.png" width="500" height="381" /></a></div></div>
<div class="center" style="width: auto; margin-left: auto; margin-right: auto;">Lokacija "cuckoo.dll"</div>  
<p><br />
Tada je još potrebno pokrenuti naredbu
</p>
<pre>     <code>
     chmod -x cuckoomon.dll
     </code>
</pre>
<p><br />
Također se preporuča brisanje VirtualBox Guest Additions, koji mogu odati da se ipak radi o virtualnoj mašini.
</p><p><br />
--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Dvuljak&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Dvuljak (stranica ne postoji)">Dvuljak</a> 20:53, 17. siječnja 2016. (CET)
</p>
<h2> <span class="mw-headline" id="Analiza_malicoznih_kodova"> Analiza malicoznih kodova </span></h2>
<h3> <span class="mw-headline" id="SpyEye"> SpyEye </span></h3>
<p>SpyEye je malware (trojanac) koji napadači koriste za krađu novca sa online bankovnih računa. Ovaj maliciozni software je sposoban za krađu računa i bankovnih podataka, brojeva socijalne službe i financijskih informacija pomoću kojih se mogu povući svi novci sa bankovnih računa.
</p><p>SpyEye također posjeduje keylogger koji pokušava preuzeti podatke za login na online bankovnom računu. Popularan je među cyberkriminalcima zato jer se može modificirati da napada specifične institucije ili određene financijske podatke.
</p><p>Odmah na početku izvješća prikazane su sve detaljne informacije o samoj datoteci koja je analizirana.
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:File_details.PNG" class="image" title="500"><img alt="500" src="../images/4/48/File_details.PNG" width="1376" height="406" /></a></div></div>
<p><br />
</p><p>Nakon informacija o samoj datoteci, možemo pogledati izvještaj o statičkoj analizi koji se sastoji od pet sekcija:
</p>
<ul><li> .text - programski kod
</li><li> .rdata - informacije o uvozu i izvozu informacija
</li><li> .data - globalni podaci o programu
</li><li> .rsrc - resursi koji su potrebni od izvršnog programa (slike, ikone…)
</li><li> .reloc - podaci o Windowsima i aplikacijama pisanim za Windowse
</li></ul>
<p>Size of Raw Data predstavlja koliko koji dio memorije virus zauzima na uređaju.
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Sections.PNG" class="image"><img alt="Sections.PNG" src="../images/thumb/5/56/Sections.PNG/500px-Sections.PNG" width="500" height="93" /></a></div></div>
<p><br />
</p><p>Sekcija „Strings“ nam prikazuje sumnjive nečitljive stringove koji se koriste u malicioznom kodu
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Strings.PNG" class="image"><img alt="Strings.PNG" src="../images/thumb/3/36/Strings.PNG/500px-Strings.PNG" width="500" height="511" /></a></div></div>
<p><br />
</p><p>U izvještaju o analizi malicioznog koda također možemo vidjeti datoteke koje su importane i što one omogućuju. SpyEye importa mnoge datoteke kao što su:
</p>
<ul><li> ReadProcessMemory - čita podatke iz memorije procesa
</li><li> VirtualAlloc – alocira dodatnu memoriju
</li><li> CreateRemoteThread - kreira petlju koja se vrti u virtaulnom adresnom prostoru
</li><li> lstrcmpiA - uspoređuje dva znaka
</li><li> WriteProcessMemory - upis podataka u memoriju procesa
</li><li> GetCurrentProcessId - dohvaća identifikator procesa
</li></ul>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Imports.PNG" class="image"><img alt="Imports.PNG" src="../images/thumb/a/a2/Imports.PNG/500px-Imports.PNG" width="500" height="188" /></a></div></div>
<p><br />
</p><p>Kod sekcije procesa vide se procesi koje je analizirani program pokrenuo. Odabirom određenog procesa vide se svi detalji što je koji proces radio, kojim datotekama je pristupao i kako se ponašao u memoriji.
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Behaviour.PNG" class="image"><img alt="Behaviour.PNG" src="../images/thumb/6/62/Behaviour.PNG/500px-Behaviour.PNG" width="500" height="239" /></a></div></div>
<p><br />
</p><p>Također možemo vidjeti koji su sve antivirusni programi uspjeli identificirati i analizirati SpyEye:
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Antivirus.PNG" class="image"><img alt="Antivirus.PNG" src="../images/thumb/1/1c/Antivirus.PNG/500px-Antivirus.PNG" width="500" height="353" /></a></div></div>
<p><br />
</p><p><br />
--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Dvuljak&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Dvuljak (stranica ne postoji)">Dvuljak</a> 20:52, 17. siječnja 2016. (CET)
</p><p><br />
</p>
<h3> <span class="mw-headline" id="Carberp"> Carberp </span></h3>
<p>Carberp je trojan virus često korišten u računalnom kriminalu u želji za krađom raznih informacija povezanih sa financijskim poslovanjem. Napadačima omogučava mogućnost krađe privatnih informacija sa online bankarskih platoformi kojima se pristupi preko zaraženog računala.
</p><p>Sposoban je potajno i neprimjetno ukrasti osjetljive podatke sa zaraženog računala. Ovo je jedan od najraširenijih financijskih virusa u Rusiji. Osnovni cilj napada su bankarski sistemi i kompanije koje vrše veliki broj financijskih transakcija, posebnost Carberpa je što osim što je sposoban izvršiti injection, sposoban je i tražiti ostale ranjivosti napadnutog sustava, čak sve do administrativnih razina.
</p><p>Distribuira se preko e-mail attachmenta, pop-up prozora, a posebnost ovog virusa je što koristi veliki broj legitiminh web resurasa koje koristi za prikupljanje raznih informacija te može napraviti lažne transakcije sa raznih računa.
Smatra se da je botnetom zaraženo oko 25.000 računala.
</p><p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Carbeerp_fileDetails.png" class="image"><img alt="Carbeerp fileDetails.png" src="../images/thumb/7/70/Carbeerp_fileDetails.png/500px-Carbeerp_fileDetails.png" width="500" height="220" /></a></div></div>
<p>Detalji o datoteci koja je analizirana. Možemo primjetiti da je virus koji je preuzet sa malwr.com detektiralo 36/45, što je oko 80% antivirusa.
</p><p><br />
Statička analiza nam ukazuje na elemente ovog virusa. Ima samo dvije sekcije:
</p>
<ul><li>.text – u ovoj sekciji nalazi se programski kod
</li><li>.rsrc – ovdje se nalaze potrebni resursi koje virus treba, poput nekih ikonica ili slika
</li></ul>
<p>Size of Raw Data predstavlja koliko koji dio memorije virus zauzima na uređaju.
</p><p><br />
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Carbeerp_section.png" class="image"><img alt="Carbeerp section.png" src="../images/thumb/3/3b/Carbeerp_section.png/500px-Carbeerp_section.png" width="500" height="81" /></a></div></div>
<p><br />
</p><p>U tablici stringovi nalaze se vrijednosti koje nisu nama čitljive ali virus ih koristi u svojim procesima.
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Carbeerp_strings.png" class="image"><img alt="Carbeerp strings.png" src="../images/thumb/6/62/Carbeerp_strings.png/500px-Carbeerp_strings.png" width="500" height="248" /></a></div></div>
<p><br />
</p><p>Datoteke koje virus dodaje pri svojem radu na računalu. Vidi se da ih nema puno, što bi značilo da ne ostavlja veliki trag u svojem radu. Googlanjem o tim datotekama možemo saznati sljedeće:
</p>
<ul><li>LoadLibraryA – učitava dll file u procesni adresni prostor
</li><li>GetProcAddress – povezan je sa LoadLibraryA 
</li><li>VirtualAlloc – alocira dodatnu memoriju
</li><li>VirtualFree – oslobađa memoriju
</li></ul>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Carbeerp_Imports.png" class="image"><img alt="Carbeerp Imports.png" src="../images/thumb/b/ba/Carbeerp_Imports.png/500px-Carbeerp_Imports.png" width="500" height="92" /></a></div></div>
<p><br />
Program ne ostavlja nikakve Drop files što znači da ne ostavlja vidljivi trag na računalu.
</p><p>Ponašanje virusa u sustavu. Započinje sa LdrLoadDll. U procesu se zatim stvara VirtualProtectEx te NtFreeVirtualMemory. Prije svakog novog procesa javlja se LdrLoadDll, LdrGetProcedureAddress i LdrGetDllHandle.Na kraju pokušava NtVirtualMemory, stvara dretvu (get, set i resume) i završava proces.
</p>
<div class="center"><div class="floatnone"><a href="http://security.foi.hr/wiki/index.php/Datoteka:Carbeerpbihevioral.png" class="image"><img alt="Carbeerpbihevioral.png" src="../images/thumb/8/8a/Carbeerpbihevioral.png/500px-Carbeerpbihevioral.png" width="500" height="122" /></a></div></div>
<p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Rskuljev&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Rskuljev (stranica ne postoji)">Rskuljev</a> 20:58, 17. siječnja 2016. (CET)
</p><p><br />
</p>
<h2> <span class="mw-headline" id="Zaklju.C4.8Dak">Zaključak</span></h2>
<p>Dinamička analiza i sandboxing su neizostavan dio današnjeg testiranja malwarea jer se maliciozni kodovi nažalost razvijaju svakodnevno. Cuckoo Sandbox je sustav koji ima veliku važnost u razvoju i testiranju raznih software-a. Ima veliku primjeru u testiranju nepovjerljivih i neprovjerenih kodova koji mogu prouzročiti štetu na računalu ili informacijskom sustavu. Nakon izrade ovog projekta zaključili smo da je Cuckoo Sandbox dosta naperdan alat koji može analizirati gotovo sve vrste datoteka i zloćudnih kodova. Cuckoo dinamičkom analizom prati i pokreće maliciozni kod u realnom vremenu i okruženju kako bi se kasnije mogla odraditi i statička analiza koda. Ovaj open source sustav može analizirati razne tipove datoteka kao što su: DLL datotek, PDF dokumenti, PHP skripte, razne izvršne Windows datoteke i može rezultate prikazati u različitim oblicima izvješća (JSON, HTML, MAEC, MongoDB…). Iako je instalacija i konfiguracija Cuckoo-a poprilično zahtjevna i osjetljiva, svakako preporučujemo korištenje Cuckoo Sandboxa, ali i ostale Sandboxove za dinamičku analizu jer svojom modularnošću i mogućnostima integracije korisnik može vidjeti što se događa sa sustavom kad je pokrenuta neka datoteka.
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Dvuljak&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Dvuljak (stranica ne postoji)">Dvuljak</a> 21:14, 17. siječnja 2016. (CET)
</p>
<h2> <span class="mw-headline" id="Literatura">Literatura</span></h2>
<p>[1]<a href="https://www.cuckoosandbox.org/" class="external free" rel="nofollow">https://www.cuckoosandbox.org/</a>
</p><p>[2]<a href="https://labs.opendns.com/2015/06/16/deploy-your-own-cuckoo-sandbox" class="external free" rel="nofollow">https://labs.opendns.com/2015/06/16/deploy-your-own-cuckoo-sandbox</a>
</p><p>[3]<a href="http://docs.cuckoosandbox.org/en/latest/" class="external free" rel="nofollow">http://docs.cuckoosandbox.org/en/latest/</a>
</p><p>[4]<a href="https://heimdalsecurity.com/blog/top-financial-malware/" class="external free" rel="nofollow">https://heimdalsecurity.com/blog/top-financial-malware/</a>
</p><p>[5]<a href="https://en.wikipedia.org/wiki/Sandbox_%28computer_security%29" class="external free" rel="nofollow">https://en.wikipedia.org/wiki/Sandbox_%28computer_security%29</a>
</p><p>[6]<a href="http://www.mal-content.org/blog/automating-malware-analysis-with-cuckoo-sandbox-part-2-setup" class="external free" rel="nofollow">http://www.mal-content.org/blog/automating-malware-analysis-with-cuckoo-sandbox-part-2-setup</a>
</p><p>[7]<a href="https://www.proteansec.com/linux/installing-using-cuckoo-malware-analysis-sandbox/" class="external free" rel="nofollow">https://www.proteansec.com/linux/installing-using-cuckoo-malware-analysis-sandbox/</a>
</p><p>[8]<a href="https://itandsecuritystuffs.wordpress.com/2014/03/14/install-cuckoobox-for-malware-and-virus-analysis/" class="external free" rel="nofollow">https://itandsecuritystuffs.wordpress.com/2014/03/14/install-cuckoobox-for-malware-and-virus-analysis/</a>
</p><p>[9]<a href="https://en.wikipedia.org/wiki/Malware_analysis" class="external free" rel="nofollow">https://en.wikipedia.org/wiki/Malware_analysis</a>
</p><p>[10]<a href="http://www.mal-content.org/blog/automating-malware-analysis-with-cuckoo-sandbox" class="external free" rel="nofollow">http://www.mal-content.org/blog/automating-malware-analysis-with-cuckoo-sandbox</a>
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Marko.bartolic&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Marko.bartolic (stranica ne postoji)">Marko.bartolic</a> 06:03, 18. siječnja 2016. (CET)
</p>
<!-- 
NewPP limit report
Preprocessor node count: 73/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key sisds:pcache:idhash:8709-0!*!0!!hr!2!edit=0 and timestamp 20190203204240 -->
<div class="printfooter">
Dobavljeno iz "<a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html">http://security.foi.hr/wiki/index.php/Dinami%C4%8Dka_sandboxing_analiza_malwarea_u_stvarnom_vremenu_%E2%80%93_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima.</a>"</div>
				<!-- /bodytext -->
								<!-- catlinks -->
				<div id='catlinks' class='catlinks catlinks-allhidden'></div>				<!-- /catlinks -->
												<div class="visualClear"></div>
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="mw-head" class="noprint">
			
<!-- 0 -->
<div id="p-personal" class="">
	<h5>Osobni alati</h5>
	<ul>
					<li  id="pt-login"><a href="http://security.foi.hr/wiki/index.php?title=Posebno:Prijava&amp;returnto=Dinami%C4%8Dka_sandboxing_analiza_malwarea_u_stvarnom_vremenu_%E2%80%93_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima." title="Predlažemo Vam da se prijavite, ali nije obvezno. [o]" accesskey="o">Prijavi se</a></li>
			</ul>
</div>

<!-- /0 -->
			<div id="left-navigation">
				
<!-- 0 -->
<div id="p-namespaces" class="vectorTabs">
	<h5>Imenski prostori</h5>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html"  title="Pogledaj sadržaj [c]" accesskey="c">Članak</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://security.foi.hr/wiki/index.php?title=Razgovor:Dinami%C4%8Dka_sandboxing_analiza_malwarea_u_stvarnom_vremenu_%E2%80%93_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima.&amp;action=edit&amp;redlink=1"  title="Razgovor o stranici [t]" accesskey="t">Razgovor</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-variants" class="vectorMenu emptyPortlet">
		<h5><span>Inačice</span><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
			</div>
			<div id="right-navigation">
				
<!-- 0 -->
<div id="p-views" class="vectorTabs">
	<h5>Pogledi</h5>
	<ul>
					<li id="ca-view" class="selected"><span><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html" >Čitaj</a></span></li>
					<li id="ca-viewsource"><span><a href="http://security.foi.hr/wiki/index.php?title=Dinami%C4%8Dka_sandboxing_analiza_malwarea_u_stvarnom_vremenu_%E2%80%93_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima.&amp;action=edit"  title="Ova stranica je zaštićena. Možete pogledati izvorni kod. [e]" accesskey="e">Vidi izvor</a></span></li>
					<li id="ca-history" class="collapsible "><span><a href="http://security.foi.hr/wiki/index.php?title=Dinami%C4%8Dka_sandboxing_analiza_malwarea_u_stvarnom_vremenu_%E2%80%93_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima.&amp;action=history"  title="Ranije izmjene na ovoj stranici. [h]" accesskey="h">Vidi stare izmjene</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-cactions" class="vectorMenu emptyPortlet">
	<h5><span>Radnje</span><a href="Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima..html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->

<!-- 2 -->
<div id="p-search">
	<h5><label for="searchInput">Traži</label></h5>
	<form action="http://security.foi.hr/wiki/index.php" id="searchform">
		<input type='hidden' name="title" value="Posebno:Traži"/>
				<input id="searchInput" name="search" type="text"  title="Pretraži ovaj wiki [f]" accesskey="f"  value="" />
		<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Kreni" title="Idi na stranicu s ovim imenom ako ona postoji" />
		<input type="submit" name="fulltext" class="searchButton" id="mw-searchButton" value="Traži" title="Traži ovaj tekst na svim stranicama" />
			</form>
</div>

<!-- /2 -->
			</div>
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="mw-panel" class="noprint">
				<!-- logo -->
					<div id="p-logo"><a style="background-image: url(../../images/osslogo.png);" href="../../wiki.html"  title="Glavna stranica"></a></div>
				<!-- /logo -->
				
<!-- navigation -->
<div class="portal" id='p-navigation'>
	<h5>Orijentacija</h5>
	<div class="body">
				<ul>
					<li id="n-mainpage-description"><a href="../../wiki.html" title="Posjeti glavnu stranicu [z]" accesskey="z">Glavna stranica</a></li>
					<li id="n-portal"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:Portal_zajednice" title="O projektu, što možete učiniti, gdje je što">Portal zajednice</a></li>
					<li id="n-currentevents"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:Novosti" title="O trenutačnim događajima">Aktualno</a></li>
					<li id="n-recentchanges"><a href="./Posebno:Nedavne_promjene.html" title="Popis nedavnih promjena u wikiju. [r]" accesskey="r">Nedavne promjene</a></li>
					<li id="n-randompage"><a href="./Posebno:Slučajna_stranica.html" title="Učitaj slučajnu stranicu [x]" accesskey="x">Slučajna stranica</a></li>
					<li id="n-help"><a href="./Pomoć:Pomoć.html" title="Mjesto za pomoć suradnicima.">Pomoć</a></li>
				</ul>
			</div>
</div>

<!-- /navigation -->

<!-- SEARCH -->

<!-- /SEARCH -->

<!-- TOOLBOX -->
<div class="portal" id="p-tb">
	<h5>Traka s alatima</h5>
	<div class="body">
		<ul>
					<li id="t-whatlinkshere"><a href="http://security.foi.hr/wiki/index.php/Posebno:%C5%A0to_vodi_ovamo/Dinami%C4%8Dka_sandboxing_analiza_malwarea_u_stvarnom_vremenu_%E2%80%93_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima." title="Popis svih stranica koje sadrže poveznice ovamo [j]" accesskey="j">Što vodi ovamo</a></li>
						<li id="t-recentchangeslinked"><a href="http://security.foi.hr/wiki/index.php/Posebno:Povezane_promjene/Dinami%C4%8Dka_sandboxing_analiza_malwarea_u_stvarnom_vremenu_%E2%80%93_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima." title="Nedavne promjene na stranicama na koje vode ovdašnje poveznice [k]" accesskey="k">Povezane stranice</a></li>
																																										<li id="t-specialpages"><a href="./Posebno:Posebne_stranice.html" title="Popis posebnih stranica [q]" accesskey="q">Posebne stranice</a></li>
									<li id="t-print"><a href="http://security.foi.hr/wiki/index.php?title=Dinami%C4%8Dka_sandboxing_analiza_malwarea_u_stvarnom_vremenu_%E2%80%93_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima.&amp;printable=yes" rel="alternate" title="Verzija za ispis ove stranice [p]" accesskey="p">Verzija za ispis</a></li>
						<li id="t-permalink"><a href="http://security.foi.hr/wiki/index.php?title=Dinami%C4%8Dka_sandboxing_analiza_malwarea_u_stvarnom_vremenu_%E2%80%93_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima.&amp;oldid=37228" title="Trajna poveznica na ovu verziju stranice">Trajna poveznica</a></li>
						</ul>
	</div>
</div>

<!-- /TOOLBOX -->

<!-- LANGUAGES -->

<!-- /LANGUAGES -->
			</div>
		<!-- /panel -->
		<!-- footer -->
		<div id="footer">
											<ul id="footer-info">
																	<li id="footer-info-lastmod"> Datum zadnje promjene na ovoj stranici: 08:51, 18. siječnja 2016.</li>
																							<li id="footer-info-viewcount">Ova stranica je pogledana 2.569 puta.</li>
																							<li id="footer-info-copyright">Sadržaji se koriste u skladu s <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="external ">Creative Commons Attribution Share Alike</a>.</li>
															</ul>
															<ul id="footer-places">
																	<li id="footer-places-privacy"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:Za%C5%A1tita_privatnosti" title="SIS Wiki:Zaštita privatnosti">Zaštita privatnosti</a></li>
																							<li id="footer-places-about"><a href="./SIS_Wiki:O_projektu_SIS_Wiki.html" title="SIS Wiki:O projektu SIS Wiki">O projektu SIS Wiki</a></li>
																							<li id="footer-places-disclaimer"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:General_disclaimer" title="SIS Wiki:General disclaimer">Odricanje od odgovornosti</a></li>
															</ul>
											<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="../skins/common/images/cc-by-sa.png" alt="Creative Commons Attribution Share Alike" width="88" height="31" /></a>
					</li>
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<!-- /footer -->
		
<script src="../load.php%3Fdebug=false&amp;lang=hr&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if ( window.mediaWiki ) {
	mediaWiki.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "Dinamička_sandboxing_analiza_malwarea_u_stvarnom_vremenu_–_mehanizam_rada_i_problematika_detekcija_virtualne_okoline._Rad_s_open_source_alatima.", "wgTitle": "Dinamička sandboxing analiza malwarea u stvarnom vremenu – mehanizam rada i problematika detekcija virtualne okoline. Rad s open source alatima.", "wgAction": "view", "wgArticleId": 8709, "wgIsArticle": true, "wgUserName": null, "wgUserGroups": ["*"], "wgCurRevisionId": 37228, "wgCategories": [], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": []});
}
</script>
<script>if ( window.mediaWiki ) {
	mediaWiki.loader.load(["mediawiki.util", "mediawiki.legacy.wikibits", "mediawiki.legacy.ajax"]);
	mediaWiki.loader.go();
}
</script>

<script>if ( window.mediaWiki ) {
	mediaWiki.user.options.set({"ccmeonemails":0,"cols":80,"contextchars":50,"contextlines":5,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,
	"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"hr","language":"hr","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;mediaWiki.loader.state({"user.options":"ready"});
}
</script>		<!-- fixalpha -->
		<script type="text/javascript"> if ( window.isMSIE55 ) fixalpha(); </script>
		<!-- /fixalpha -->
		<!-- Served in 0.553 secs. -->			</body>
</html>
