<!DOCTYPE html>
<html lang="hr" dir="ltr">
<head>
<meta charset="UTF-8" />
<title>Očvršćenje GNU/Linux baziranih poslužitelja - SIS Wiki</title>
<meta name="generator" content="MediaWiki 1.17.0" />
<link rel="shortcut icon" href="http://security.foi.hr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch_desc.php" title="SIS Wiki (hr)" />
<link rel="EditURI" type="application/rsd+xml" href="../../api.php%3Faction=rsd" />
<link title="Creative Commons" type="application/rdf+xml" href="http://security.foi.hr/wiki/index.php?title=O%C4%8Dvr%C5%A1%C4%87enje_GNU/Linux_baziranih_poslu%C5%BEitelja&amp;action=creativecommons" rel="meta" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="SIS Wiki Atom izvor" href="../../index.php%3Ftitle=Posebno:Nedavne_promjene&amp;feed=atom" />
<link rel="stylesheet" href="../../load.php%3Fdebug=false&amp;lang=hr&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cskins.vector&amp;only=styles&amp;skin=vector&amp;*.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/wiki/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr ns-0 ns-subject page-Očvršćenje_GNU_Linux_baziranih_poslužitelja skin-vector">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<!-- content -->
		<div id="content">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading">Očvršćenje GNU/Linux baziranih poslužitelja</h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
				<!-- tagline -->
				<div id="siteSub">Izvor: SIS Wiki</div>
				<!-- /tagline -->
				<!-- subtitle -->
				<div id="contentSub"></div>
				<!-- /subtitle -->
																<!-- jumpto -->
				<div id="jump-to-nav">
					Skoči na: <a href="Linux_baziranih_poslužitelja.html#mw-head">orijentacija</a>,
					<a href="Linux_baziranih_poslužitelja.html#p-search">traži</a>
				</div>
				<!-- /jumpto -->
								<!-- bodytext -->
				<p>Josip Mlakar
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Sadržaj</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Linux_baziranih_poslužitelja.html#A.C5.BEuriranje"><span class="tocnumber">1</span> <span class="toctext">Ažuriranje</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Linux_baziranih_poslužitelja.html#Konfiguriranje_vatrozida"><span class="tocnumber">2</span> <span class="toctext">Konfiguriranje vatrozida</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Linux_baziranih_poslužitelja.html#Konfiguriranje_SSH"><span class="tocnumber">3</span> <span class="toctext">Konfiguriranje SSH</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="Linux_baziranih_poslužitelja.html#Osnovne_postavke"><span class="tocnumber">4</span> <span class="toctext">Osnovne postavke</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="Linux_baziranih_poslužitelja.html#Konfiguriranje_autentikacije_pomo.C4.87u_klju.C4.8Da"><span class="tocnumber">4.1</span> <span class="toctext">Konfiguriranje autentikacije pomoću ključa</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="Linux_baziranih_poslužitelja.html#Kopiranje_javnog_klju.C4.8Da_na_server"><span class="tocnumber">4.1.1</span> <span class="toctext">Kopiranje javnog ključa na server</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="Linux_baziranih_poslužitelja.html#Zabrana_autentikacije_preko_lozinke"><span class="tocnumber">4.1.2</span> <span class="toctext">Zabrana autentikacije preko lozinke</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="Linux_baziranih_poslužitelja.html#Password_Aging"><span class="tocnumber">5</span> <span class="toctext">Password Aging</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="Linux_baziranih_poslužitelja.html#Sigurnosne_kopije"><span class="tocnumber">6</span> <span class="toctext">Sigurnosne kopije</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="Linux_baziranih_poslužitelja.html#Rsync"><span class="tocnumber">6.1</span> <span class="toctext">Rsync</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="Linux_baziranih_poslužitelja.html#Lokalno_sigurnosno_kopiranje"><span class="tocnumber">6.1.1</span> <span class="toctext">Lokalno sigurnosno kopiranje</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="Linux_baziranih_poslužitelja.html#Sigurnosno_kopiranje_na_server"><span class="tocnumber">6.1.2</span> <span class="toctext">Sigurnosno kopiranje na server</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="Linux_baziranih_poslužitelja.html#Sigurnosno_kopiranje_preko_SSH"><span class="tocnumber">6.1.3</span> <span class="toctext">Sigurnosno kopiranje preko SSH</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="Linux_baziranih_poslužitelja.html#Upravljanje_paketima_i_servisima"><span class="tocnumber">7</span> <span class="toctext">Upravljanje paketima i servisima</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="Linux_baziranih_poslužitelja.html#Paketi"><span class="tocnumber">7.1</span> <span class="toctext">Paketi</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="Linux_baziranih_poslužitelja.html#Servisi"><span class="tocnumber">7.2</span> <span class="toctext">Servisi</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="Linux_baziranih_poslužitelja.html#Kriptiranje"><span class="tocnumber">8</span> <span class="toctext">Kriptiranje</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="Linux_baziranih_poslužitelja.html#encfs"><span class="tocnumber">8.1</span> <span class="toctext">encfs</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="Linux_baziranih_poslužitelja.html#Sustavi_za_detekciju_upada"><span class="tocnumber">9</span> <span class="toctext">Sustavi za detekciju upada</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="Linux_baziranih_poslužitelja.html#AIDE"><span class="tocnumber">9.1</span> <span class="toctext">AIDE</span></a>
<ul>
<li class="toclevel-3 tocsection-21"><a href="Linux_baziranih_poslužitelja.html#Konfiguriranje_Aide"><span class="tocnumber">9.1.1</span> <span class="toctext">Konfiguriranje Aide</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="Linux_baziranih_poslužitelja.html#Analiza_log_datoteka"><span class="tocnumber">10</span> <span class="toctext">Analiza log datoteka</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="Linux_baziranih_poslužitelja.html#Logwatch"><span class="tocnumber">10.1</span> <span class="toctext">Logwatch</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="Linux_baziranih_poslužitelja.html#Fail2Ban"><span class="tocnumber">11</span> <span class="toctext">Fail2Ban</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="Linux_baziranih_poslužitelja.html#Literatura"><span class="tocnumber">12</span> <span class="toctext">Literatura</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="A.C5.BEuriranje"><b>Ažuriranje</b></span></h2>
<p>Ažuriranje operacijskog sustava je jedna od najvažnijih radnji vezanih za sigurnost. Redovito se otkrivaju nove slabosti sustava koje se ispravljaju ažuriranjem. Sustav koji se redovito ne ažurira ostaje izložen slabostima i s vremenom ga je sve lakše probiti. Ažuriranje Linux servera (Ubuntu distribucija )se može provesti naredbama:
</p>
<pre>sudo apt-get update
sudo apt-get dist-upgrade
</pre>
<h2> <span class="mw-headline" id="Konfiguriranje_vatrozida"><b>Konfiguriranje vatrozida</b></span></h2>
<p>Vatrozid služi kao barijera između servera i ostatka interneta. vatrozid analizira promet koji ulazi ili izlazi sa servera te ovisno o definiranim pravilima odlučuje hoće li propustiti taj promet. Postoji nekoliko rješenja za upravljanje vatrozidom. 
</p>
<ul><li>UFW
</li><li>IPTables
</li><li>IP6Tables
</li><li>NFTables
</li></ul>
<h2> <span class="mw-headline" id="Konfiguriranje_SSH"><b>Konfiguriranje SSH</b></span></h2>
<p>SSH (secure shell) je kriptirani protokol za komunikaciju sa serverom. On omogućuje udaljeno upravljanje serverm što čini administriranje znatno fleksibilnije, ali i nesigurnije. Korisnik servera se tako može povezati sa serverom neovisno gdje se on nalazio ako ima korisničke podatke,tj. ne treba fizički biti povezan. Mogućnost udaljenog povezivanja omogućava potencijalnom napadaću da napadne server i pokuša dobiti korisničke podatke pa je potrebno pravilno konigurirati SSH.
</p>
<h2> <span class="mw-headline" id="Osnovne_postavke"><i>Osnovne postavke</i></span></h2>
<p>SSH možemo konfigurirati u datoteci sshd_config. Kako bi ju mijenjali potrebne su nam administratorske ovlasti, a nalazi se na putanji:
</p>
<pre>/etc/ssh/sshd_config
</pre>
<p>Preporuća se onemogućavanje spajanja preko root računa jer osim što root račun ima apsolutno sve ovlasti na serveru, njegovo korisničko ime je poznato (root) što olakšava brute force napade. Puno je teže pogoditi i korisničko ime i lozinku nego samo lozinku. Onemogućavanje spajanja preko root računa radimo tako što liniju
</p>
<pre>PermitRootLogin yes
</pre>
<p>mijenjamo u 
</p>
<pre>PermitRootLogin no
</pre>
<p>Također dobro je promijeniti port preko kojeg se spajamo na server pomoću SSH. Standardno se spaja preko porta 22, a kako bi ga promijenili potrebno je izmjeniti liniju
</p>
<pre>Port 22
</pre>
<p>u bilo koji broj u rasponu od 1025 i 65536. Na primjer
</p>
<pre>Port 9000
</pre>
<h3> <span class="mw-headline" id="Konfiguriranje_autentikacije_pomo.C4.87u_klju.C4.8Da"><b>Konfiguriranje autentikacije pomoću ključa</b></span></h3>
<p>Lozinke za pristupanju korisničkom računu se šalju sigurnim kanalima, ali često nisu dovoljno komplicirani i dugački da bi spriječili potencijalne napadače. Stoga je preporučljivo koristiti autentikaciju preko ključa. SSH par ključeva su dva kriptografska ključaj. Privatni ključ posjeduje korisnik i on mora biti tajan, dok je javan ključ pohranjen na serveru i njegovo otkrivanje ne kompromitira sigurnost servera. Na serveru se javni ključ pohranjuje na lokaciji
</p>
<pre>~/.ssh/authorized_keys
</pre>
<p>Kreiranje para ključeva vrši se na korisnikovom računalu. Ključevi se generiraju naredbom
</p>
<pre>ssh-keygen
</pre>
<p>Korisnika se tada pita za lokaciju gdje će biti spremljeni ključevi. najbolje je samo pritisnuti enter i koristiti unaprijed postavljenu lokaciju. To je zato da  SSH klijent može automatski pronaći SSH ključeve prilikom autentikacije. Ako se ostavi unaprijed postavljena lokacija, javni ključ se sprema na
</p>
<pre>/home/<i>korisničko_ime</i>/.ssh/id_rsa
</pre>
<p>a privatni na 
</p>
<pre>/home/<i>korisničko_ime</i>/.ssh/id_rsa.pub
</pre>
<p>Od korisnika će se zatim zatražiti da unese lozinku za kriptiranje privatnog ključa. To nije obavezno i može se preskočiti pritiskom tipke enter. 
</p>
<h4> <span class="mw-headline" id="Kopiranje_javnog_klju.C4.8Da_na_server"><b>Kopiranje javnog ključa na server</b></span></h4>
<p>Kopiranje se može izvesti na više načina. 
</p>
<ol><li> kopiranje pomoću SSH-Copy-ID
<ul><li> najlakši način
</li><li> na lokalnom računalu upisati naredbu ssh-copy-id <i>korisničko_ime</i>@<i>adresa_servera</i>
</li></ul>
</li><li> kopiranje pomoću SSH
<ul><li> na lokalnom računalu unesti naredbu cat ~/.ssh/id_rsa.pub | ssh <i>korisničko_ime</i>@<i>adresa_servera</i> "mkdir -p ~/.ssh &amp;&amp; cat &gt;&gt; ~/.ssh/authorized_keys"
</li></ul>
</li><li> ručno kopiranje
<ul><li> dobiti javni ključ na lokalnom računalu sa naredbom cat ~/.ssh/id_rsa.pub
</li><li> na serveru kreairati mapu .ssh naredbom mkdir -p ~/.ssh
</li><li> spremiti ključ sa echo <i>javni_ključ</i> &gt;&gt; ~/.ssh/authorized_keys
<ul><li> <i>javni_kljuc</i> predstavlja javni ključ dobiven prvim korakom
</li></ul>
</li></ul>
</li></ol>
<h4> <span class="mw-headline" id="Zabrana_autentikacije_preko_lozinke"><b>Zabrana autentikacije preko lozinke</b></span></h4>
<p>Kako bi onemogućili prijavu preko lozinke tako da se korisnik može spojiti samo preko ključa, potrebno je malo izmjeniti sshd_config. Potrebno je promijeniti 
</p>
<pre>PasswordAuthentication yes
</pre>
<p>u 
</p>
<pre>PasswordAuthentication no
</pre>
<h2> <span class="mw-headline" id="Password_Aging"><b>Password Aging</b></span></h2>
<p>Redovita promjena lozinke čini korisnički račun sigurnijim. Nažalost korisnici nemaju uvijek naviku redovito mijenjati svoju lozinku do te mjere da čak ostave početnu lozinku koju im je dodjelio administrator. Tome problemu se može priskočiti tako da se korisnika prisili na redovito mijenjanje lozinke. To se može napraviti pomoću naredbe <i>chage</i>. opcije naredbe chage su sljedeće:
</p>
<ul><li> -m označava minimalni broj dana od posljednjeg postavljanja lozinke koji mora proći kako bi se ponovno mogla promjeniti lozinka
</li><li> -M označava "trajanje" lozinke, tj. koliko dana od zadnjeg postavljanja je lozinka valjana
</li><li> -d označava broj dana od 1.1.1970 do kad je lozinka promjenjena
</li><li> -E označava datum od kojega korisnički račun više neće biti dostupan
</li><li> -I označava broj neaktivnih dana nakon što istekne password. Nakon toga korisnički račun više nije dostupan
</li><li> -W označava koliko dana prije isteka lozinke će se prikazivati poruka upozorenja
</li></ul>
<p>Primjer korištenja <i>chage</i> naredbe:
</p>
<pre>chage -M 60 -m 10 -W 5 <i>korisnik</i>
</pre>
<p>U primjeru je postavljeno da lozinka vrijedi 60 dana, da se može promijeniti nakon 10 dana i da će se poruka upozorenja prikazivati 5 dana prije isteak lozinke.
</p>
<h2> <span class="mw-headline" id="Sigurnosne_kopije"><b>Sigurnosne kopije</b></span></h2>
<p>Ukoliko se na server pohranjuju važni podaci, vrlo je važna izrada njihove sigurnosne kopije. Sigurnosna kopija omogućava povrat podataka koji bi inaće bili izgubljeni ukoliko bi došlo do kvara servera. Postoji više alata za izradu sigurnosne kopije na Linux serverima, neki od njih su:
</p>
<ol><li> fwbackups
</li><li> Bacula
</li><li> Rsync
</li><li> Mondorescue
</li><li>Simple Backup Solution
</li></ol>
<h3> <span class="mw-headline" id="Rsync"><b>Rsync</b></span></h3>
<p>Rsync je jedan od najčešće korištenih alata za kopiranje i sinkroniziranje podataka. Omogućava sigurnosno kopiranje i lokalno i globalno. Osnovna sintaksa:
</p>
<pre>rsync <i>opcije</i> <i>izvor</i> <i>odrediste</i>
</pre>
<p>Osnovne opcije Rsync-a:
</p>
<ul><li> -v opširnost informacija koje se dobijavaju prilikom prijenosa
</li><li> -r kopiranje datoteka i njima pripadajučih pod-datoteka (bez očuvanja vremenskih oznaka i dozvola)
</li><li> -a kopiranje datoteka i njima pripadajučih pod-datoteka s očuvanjem veza, dozvola i vremenskih oznaka
</li><li> -z sažimanje podataka
</li><li> -h izlazni brojevi u čitljivom formatu
</li></ul>
<h4> <span class="mw-headline" id="Lokalno_sigurnosno_kopiranje"><b>Lokalno sigurnosno kopiranje</b></span></h4>
<pre>rsync -<i>opcije</i> <i>izvorna_datoteka/folder</i> <i>odredišna_datoteka/folder</i>
</pre>
<h4> <span class="mw-headline" id="Sigurnosno_kopiranje_na_server"><b>Sigurnosno kopiranje na server</b></span></h4>
<pre>rsync -<i>opcije</i> <i>lokalna_datoteka/folder</i> <i>korisničko_ime</i>@<i>adresa_servera</i>:/<i>putanja</i>
</pre>
<p>Kopiranje sa servera ima istu sintaksu samo se zamjene izvor i odredište.
</p>
<h4> <span class="mw-headline" id="Sigurnosno_kopiranje_preko_SSH"><b>Sigurnosno kopiranje preko SSH</b></span></h4>
<pre>rsync <i>opcije</i> -e ssh 'korisničko_ime'@'adresa_servera':<i>izvorisna_datoteka/folder</i> <i>odredišni_folder</i>
</pre>
<p>Ukoliko se preko SSH ne spaja na standardni port (22) potrebno je izmjeniti naredbu:
</p>
<pre>rsync <i>opcije</i> -e "ssh -p <i>broj_porta</i>" 'korisničko_ime'@'adresa_servera':<i>izvorisna_datoteka/folder</i> <i>odredišni_folder</i>
</pre>
<h2> <span class="mw-headline" id="Upravljanje_paketima_i_servisima"><b>Upravljanje paketima i servisima</b></span></h2>
<p>Svaki instalirani servis znači dodatnu potencijalnu ranjivost servera. Zato je bitno voditi računa o instaliranim paketima i koristiti samo one servise koji su nužni za rad.
</p>
<h3> <span class="mw-headline" id="Paketi"><b>Paketi</b></span></h3>
<p>Kako bi vidjeli listu instaliranih paketa možemo koristiti naredbu
</p>
<pre>dpkg --get-selections
</pre>
<p>Za filtriranje liste paketa možemo koristiti <i>grep</i> pa tako ako želimo vidjeti sve python pakete možemo upisati:
</p>
<pre>dpkg --get-selections | grep python
</pre>
<p>Ako želimo vidjeti lokacije svih datoteka određenog paketa možemo koristiti -L. Primjer:
</p>
<pre>dpkg -L python3.4
</pre>
<p>Brisanje paketa vršimo naredbom:
</p>
<pre>apt-get remove <i>ime_paketa</i>
</pre>
<h3> <span class="mw-headline" id="Servisi"><b>Servisi</b></span></h3>
<p>Kako bi izlistali sve servise koristimo naredbu:
</p>
<pre>service --status-all
</pre>
<ul><li>+ znači da je servis trenutno upaljen
</li><li>- znači da je servis trenutno ugašen
</li><li>? znači da je nepoznato trenutno stanje servisa
</li></ul>
<p>Servise gasimo naredbom:
</p>
<pre>service <i>ime_servisa</i> stop
</pre>
<p>Servise palimo naredbom:
</p>
<pre>service <i>ime_servisa</i> start
</pre>
<p>Servise resetiramo naredbom:
</p>
<pre>service <i>ime_servisa</i> restart
</pre>
<p>Kako bi dobili trenutni status servisa koristimo:
</p>
<pre>service <i>ime_servisa</i> status
</pre>
<h2> <span class="mw-headline" id="Kriptiranje"><b>Kriptiranje</b></span></h2>
<p>Datoteke koje su osjetljive i vrlo bitne možemo dodatno zaštiti tako da ih kriptiramo.
</p>
<h3> <span class="mw-headline" id="encfs"><b>encfs</b></span></h3>
<p>Encfs je vrlo jednostavna aplikacija za kriptiranje mapa. Instalira se naredbom:
</p>
<pre>apt-get install encfs
</pre>
<p>Kako bi kreirali mapu u koju želimo spremati osjetljive podatke koristimo sintaksu:
</p>
<pre>encfs 'putanja_do_kriptirane_mape' 'putanja_do_mape_koju_želimo_kriptirati'
</pre>
<p>Aplikacija nas tada pita za ključ kojim ćemo kasnije moći dekriptirati podatke. Kada spremimo sve željene podatke u mapu koju želimo kriptirati koristimo naredbu:
</p>
<pre>fusermount -u ~/'putanja_do_mape_koju_želimo_kriptirati'
</pre>
<p>Tada će se u kriptiranu mapu pohraniti kriptirani podaci, a podaci iz mape kou želimo kriptirati će nestati. Kako bi vratili podatke ponovno unosimo naredbu kao i za kreiranje mapa. Aplikacija će nas zatim tražiti za ključ. Ukoliko je ključ ispravan, mapa sa podacima koje smo htjeli kriptirati će opet sadržavati čitljive podatke.
</p>
<h2> <span class="mw-headline" id="Sustavi_za_detekciju_upada"><b>Sustavi za detekciju upada</b></span></h2>
<p>Implementacija sustava za detekciju upada je jedna od najvažnijih stvari vezanih za sigurnost servera. Pomoću njih možemo vrlo lako pratiti promjene u konfiguraciji ili ostalim podacima na serveru kako bi što lakše mogli otkriti i sankcionirati neovlaštene upade i štetu na serveru. Postoji nekoliko sustava za detekciju upada za Linux sustave. Neki od njih su:
</p>
<ul><li>Tripwire
</li><li>Aide
</li><li>Psad
</li><li>Bro
</li><li>RKHunter
</li></ul>
<h3> <span class="mw-headline" id="AIDE"><b>AIDE</b></span></h3>
<p>Aide radi tako da kreira bazu sa stanjem sustava u tom trenutku i onda kasnije uspoređuje te podatke sa trenutnim stanjem sustava. Ukoliko je došlo do promijena Aide ispisuje izvještaj o svim promjenama između trenutnog i početnog stanja. Ukoliko je na serveru postavljen e-mail server Aide se može postaviti tako da šalje izvještaje na e-mail. Aide se može instalirati naredbom:
</p>
<pre>apt-get install aide
</pre>
<p>Porebno je prvo kreirati bazu sa početnim stanjem. Bazu kreiramo naredbom:
</p>
<pre>sudo aide -c /etc/aide/aide.conf --init
</pre>
<p>Novokreirana baza se nalazi na lokaciji
</p>
<pre>/var/lib/aide/aide.db.new
</pre>
<p>Poželjno je preimenovati bazu tako da nova baza ne prepiše ovu, tada već staru bazu.
</p>
<pre>mv /var/lib/aide/aide.db.new /var/lib/aide/aide.db
</pre>
<p>Ako želimo provjeriti jesu li se u međuvremenu dogodile kakve promjene, koristimo naredbu:
</p>
<pre>aide -c /etc/aide/aide.conf -u
</pre>
<p>-u nam služi da opet generiramo novu bazu koja sadrži podatke u trenutku provjere.
Poželjno je nakon toga ponovno preimenovati bazu, kako bi mogli ponoviti postupak.
</p>
<pre>sudo cp /var/lib/aide/aide.db.new /var/lib/aide/aide.db
</pre>
<h4> <span class="mw-headline" id="Konfiguriranje_Aide"><b>Konfiguriranje Aide</b></span></h4>
<p>Konfiguraciju mapa koje će Aide uzimati u obzir možemo definirati u datoteci <i>aide.conf</i> koja se nalazi na lokaciji:
</p>
<pre>/etc/aide/aide.conf
</pre>
<p>Kako bi odredili koje mape ulaze u obzir u datoteku jednostavno dodamo željenu putanju i pravila. Na primjer:
</p>
<pre>/etc p+u+g
</pre>
<ul><li>p označava dozvole nad datotekom/mapom
</li><li>u označava vlasnika datoteke/mape
</li><li>g označava grupu vlasnika datoteke/mape
</li></ul>
<p>Ukoliko želimo da na Aide šalje e-mail sa izvještajem, e-mail adresu možemo definirati u datoteci <i>aide</i> koja se nalazi na lokaciji:
</p>
<pre>/etc/default/aide
</pre>
<p>Ovdje promijenimo vrijednost
</p>
<pre>MAILTO=root
</pre>
<p>u
</p>
<pre>MAILTO=<i>željena_e-mail_adresa</i>
</pre>
<h2> <span class="mw-headline" id="Analiza_log_datoteka"><b>Analiza log datoteka</b></span></h2>
<p>Log datoteke su uglavnom tekstualne datoteke u kojima se nalaze podaci o aktivnostima na serveru. Log datoteke su vrlo iscrpne i potrebno je dosta vremena kako bi se ručno analizirale. Kako bi se olakšao posao analiziranja log datoteka postoje aplikacije koje iz log datoteka izvlače podatke potrebne administratoru i prikazuju ih u obliku izvještaja.
</p>
<h3> <span class="mw-headline" id="Logwatch"><b>Logwatch</b></span></h3>
<p>Logwatch je jedan od takvih alata. Možemo ga instalirati naredbom:
</p>
<pre>apt-get install logwatch
</pre>
<p>Logwatch možemo konfigurirati u datoteci <i>logwatch.conf</i> koja se nalazi na lokaciji:
</p>
<pre>/usr/share/logwatch/default.conf/logwatch.conf
</pre>
<p>Ukoliko želimo da nam izvještaji dolaze na e-mail moramo promijeiti liniju
</p>
<pre>MailTo = root
</pre>
<p>u
</p>
<pre>MailTo = <i>željena_email_adresa</i>
</pre>
<p>Izvještaji se mogu dobivati za jučerašnje stanje, današnje stanje ili za stanje od instalacije aplikacije. To definiramo u liniji:
</p>
<pre>Range = Today
</pre>
<p>Izvještaji mogu dolaziti u više razina detalja, ovisno o tome koliko želimo da nam bude iscrpan. Postoje tri razine iscrpnosti, Low, Medium i High. TRazinu iscrpnosti možemo definirati u liniji:
</p>
<pre>Detal = Medium
</pre>
<p>Za određivanje servisa koji će se analizirati dodajemo linije:
</p>
<pre>Service = [<i>ime</i>]
</pre>
<p>ili ako želimo obuhvatiti sve usluge:
</p>
<pre>Service = all
</pre>
<p>Logwatch se pokreće dnevno i šalje izvještaje na e-mail. Ako ga želimo pokrenuti ručno koristimo sintaksu:
</p>
<pre>logwatch  [--detail  level  ] [--logfile log-file-group ] [--service service-name ] [--print]
  [--mailto address ] [--archives] [--range range  ]  [--debug  level  ]  [--save  file-name  ]
  [--logdir  directory ] [--hostname hostname ] [--splithosts] [--multiemail] [--output output-
  type ] [--numeric] [--no-oldfiles-log] [--version] [--help|--usage]
</pre>
<p>Primjer:
</p>
<pre>logwatch --detail Medium --service all --range today
</pre>
<h2> <span class="mw-headline" id="Fail2Ban"><b>Fail2Ban</b></span></h2>
<p>Fail2ban je servis koji automatski mijenja pravila vatrozida ovisno o predefiniranom broju neuspjelih prijava na server preko SSH protokola. To znači da je glavna uloga Fail2Ban servisa zabraniti pristup onim ip adresama koje pokušavaju brute-force metodom doći do korisničkih podataka korisnika na serveru. Na taj način se mogu spriječiti zloćudne aktivnosti na serveru bez da intervenira čovjek. Fail2Ban se može instalirati naredbom:
</p>
<pre>sudo apt-get install fail2ban
</pre>
<p>Konfiguracija Fail2Ban servisa se vrši u datoteci jail.conf. Postoji mogućnost da ažuriranje nekog paketa modificira jail.conf pa je poželjno napraviti kopiju i raditi na njoj.
</p>
<pre>cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local
</pre>
<p>Od bitnijih stvari koje se mogu konfigurirati je ignoreip. Njime zadajemo koje ip adrese neće biti blokirane iako prekrše definirana pravila.
</p>
<pre>ignoreip = <i>željena_adresa</i>
</pre>
<p>Parametar bantime označuje vrijeme u sekundama koje će ip adresa biti blokirana.
</p>
<pre>bantime = <i>vrijeme_u_sekundama</i>
</pre>
<p>Parametar maxretry označuje koliko se puta mogu unesti pogrešni podaci prije nego se blokira ip.
</p>
<pre>maxretry = 3
</pre>
<p>Parametar findtime označuje vremenski okvir u sekundama unutar kojeg se broje neuspjeli pokušaji. Na primjer ako je zadano
</p>
<pre>findtime = 100
maxretry = 3
</pre>
<p>ip se blokira ako je s te ip adrese bilo tri neuspjela pokušaja prijave unutar 100 sekundi.
</p><p>Parametar destemail označuje na koju e-mail adresu se trebaju slati izvještaji, a parametar mta koji mail servis će se koristiti za slanje maila.
</p>
<pre>destemail = <i>e-mail_adresa</i>
mta = <i>e-mail_servis</i>
</pre>
<p>Parametar action definira radnju koju će Fail2Ban poduzeti kada otkrije zloćudnu radnju. Vrijednost action_ znači da će se konfigurirati vatrozid tako da odbija promet sa sumnjivog ip-a. Vrijednost action_mw znači sve što i action_ osim što se šalje i e-mail sa obavijesti. Vrijednost action_mwl u mailu šalje i log.
</p>
<pre>action = $(action_)s
</pre>
<h2> <span class="mw-headline" id="Literatura"> <b>Literatura</b></span></h2>
<p><a href="https://www.ibm.com/developerworks/linux/tutorials/l-harden-server/" class="external free" rel="nofollow">https://www.ibm.com/developerworks/linux/tutorials/l-harden-server/</a>
</p><p><a href="http://www.tecmint.com/rsync-local-remote-file-synchronization-commands/" class="external free" rel="nofollow">http://www.tecmint.com/rsync-local-remote-file-synchronization-commands/</a>
</p><p><a href="https://help.ubuntu.com/community/FolderEncryption" class="external free" rel="nofollow">https://help.ubuntu.com/community/FolderEncryption</a>
</p><p><a href="http://www.tecmint.com/linux-server-hardening-security-tips/" class="external free" rel="nofollow">http://www.tecmint.com/linux-server-hardening-security-tips/</a>
</p><p><a href="http://www.cyberciti.biz/tips/linux-security.html" class="external free" rel="nofollow">http://www.cyberciti.biz/tips/linux-security.html</a>
</p><p><a href="https://www.digitalocean.com/community/tutorials/an-introduction-to-securing-your-linux-vps" class="external free" rel="nofollow">https://www.digitalocean.com/community/tutorials/an-introduction-to-securing-your-linux-vps</a>
</p><p><a href="http://www.howtoforge.com/linux-security-notes-aide-file-integrity" class="external free" rel="nofollow">http://www.howtoforge.com/linux-security-notes-aide-file-integrity</a>
</p><p><a href="http://www.cs.tut.fi/~rammer/aide/manual.html" class="external free" rel="nofollow">http://www.cs.tut.fi/~rammer/aide/manual.html</a>
</p><p><a href="http://pka.engr.ccny.cuny.edu/~jmao/node/30" class="external free" rel="nofollow">http://pka.engr.ccny.cuny.edu/~jmao/node/30</a>
</p><p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-aide-on-a-digitalocean-vps" class="external free" rel="nofollow">https://www.digitalocean.com/community/tutorials/how-to-install-aide-on-a-digitalocean-vps</a>
</p><p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-logwatch-log-analyzer-and-reporter-on-a-vps" class="external free" rel="nofollow">https://www.digitalocean.com/community/tutorials/how-to-install-and-use-logwatch-log-analyzer-and-reporter-on-a-vps</a>
</p><p><a href="https://pelanne.com/blog/get-daily-server-overview-email-logwatch/" class="external free" rel="nofollow">https://pelanne.com/blog/get-daily-server-overview-email-logwatch/</a>
</p><p><a href="http://www.debianhelp.co.uk/logwatch1.htm" class="external free" rel="nofollow">http://www.debianhelp.co.uk/logwatch1.htm</a>
</p><p><a href="http://linux.die.net/man/8/logwatch" class="external free" rel="nofollow">http://linux.die.net/man/8/logwatch</a>
</p><p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-fail2ban-on-ubuntu-14-04" class="external free" rel="nofollow">https://www.digitalocean.com/community/tutorials/how-to-install-and-use-fail2ban-on-ubuntu-14-04</a>
</p><p><a href="http://www.the-art-of-web.com/system/fail2ban/" class="external free" rel="nofollow">http://www.the-art-of-web.com/system/fail2ban/</a>
</p>
<!-- 
NewPP limit report
Preprocessor node count: 99/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key sisds:pcache:idhash:7919-0!*!0!!hr!*!edit=0 and timestamp 20190203204253 -->
<div class="printfooter">
Dobavljeno iz "<a href="Linux_baziranih_poslužitelja.html">http://security.foi.hr/wiki/index.php/O%C4%8Dvr%C5%A1%C4%87enje_GNU/Linux_baziranih_poslu%C5%BEitelja</a>"</div>
				<!-- /bodytext -->
								<!-- catlinks -->
				<div id='catlinks' class='catlinks catlinks-allhidden'></div>				<!-- /catlinks -->
												<div class="visualClear"></div>
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="mw-head" class="noprint">
			
<!-- 0 -->
<div id="p-personal" class="">
	<h5>Osobni alati</h5>
	<ul>
					<li  id="pt-login"><a href="http://security.foi.hr/wiki/index.php?title=Posebno:Prijava&amp;returnto=O%C4%8Dvr%C5%A1%C4%87enje_GNU/Linux_baziranih_poslu%C5%BEitelja" title="Predlažemo Vam da se prijavite, ali nije obvezno. [o]" accesskey="o">Prijavi se</a></li>
			</ul>
</div>

<!-- /0 -->
			<div id="left-navigation">
				
<!-- 0 -->
<div id="p-namespaces" class="vectorTabs">
	<h5>Imenski prostori</h5>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="Linux_baziranih_poslužitelja.html"  title="Pogledaj sadržaj [c]" accesskey="c">Članak</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://security.foi.hr/wiki/index.php?title=Razgovor:O%C4%8Dvr%C5%A1%C4%87enje_GNU/Linux_baziranih_poslu%C5%BEitelja&amp;action=edit&amp;redlink=1"  title="Razgovor o stranici [t]" accesskey="t">Razgovor</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-variants" class="vectorMenu emptyPortlet">
		<h5><span>Inačice</span><a href="Linux_baziranih_poslužitelja.html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
			</div>
			<div id="right-navigation">
				
<!-- 0 -->
<div id="p-views" class="vectorTabs">
	<h5>Pogledi</h5>
	<ul>
					<li id="ca-view" class="selected"><span><a href="Linux_baziranih_poslužitelja.html" >Čitaj</a></span></li>
					<li id="ca-viewsource"><span><a href="http://security.foi.hr/wiki/index.php?title=O%C4%8Dvr%C5%A1%C4%87enje_GNU/Linux_baziranih_poslu%C5%BEitelja&amp;action=edit"  title="Ova stranica je zaštićena. Možete pogledati izvorni kod. [e]" accesskey="e">Vidi izvor</a></span></li>
					<li id="ca-history" class="collapsible "><span><a href="http://security.foi.hr/wiki/index.php?title=O%C4%8Dvr%C5%A1%C4%87enje_GNU/Linux_baziranih_poslu%C5%BEitelja&amp;action=history"  title="Ranije izmjene na ovoj stranici. [h]" accesskey="h">Vidi stare izmjene</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-cactions" class="vectorMenu emptyPortlet">
	<h5><span>Radnje</span><a href="Linux_baziranih_poslužitelja.html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->

<!-- 2 -->
<div id="p-search">
	<h5><label for="searchInput">Traži</label></h5>
	<form action="http://security.foi.hr/wiki/index.php" id="searchform">
		<input type='hidden' name="title" value="Posebno:Traži"/>
				<input id="searchInput" name="search" type="text"  title="Pretraži ovaj wiki [f]" accesskey="f"  value="" />
		<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Kreni" title="Idi na stranicu s ovim imenom ako ona postoji" />
		<input type="submit" name="fulltext" class="searchButton" id="mw-searchButton" value="Traži" title="Traži ovaj tekst na svim stranicama" />
			</form>
</div>

<!-- /2 -->
			</div>
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="mw-panel" class="noprint">
				<!-- logo -->
					<div id="p-logo"><a style="background-image: url(../../../images/osslogo.png);" href="../../../wiki.html"  title="Glavna stranica"></a></div>
				<!-- /logo -->
				
<!-- navigation -->
<div class="portal" id='p-navigation'>
	<h5>Orijentacija</h5>
	<div class="body">
				<ul>
					<li id="n-mainpage-description"><a href="../../../wiki.html" title="Posjeti glavnu stranicu [z]" accesskey="z">Glavna stranica</a></li>
					<li id="n-portal"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:Portal_zajednice" title="O projektu, što možete učiniti, gdje je što">Portal zajednice</a></li>
					<li id="n-currentevents"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:Novosti" title="O trenutačnim događajima">Aktualno</a></li>
					<li id="n-recentchanges"><a href="../Posebno:Nedavne_promjene.html" title="Popis nedavnih promjena u wikiju. [r]" accesskey="r">Nedavne promjene</a></li>
					<li id="n-randompage"><a href="../Posebno:Slučajna_stranica.html" title="Učitaj slučajnu stranicu [x]" accesskey="x">Slučajna stranica</a></li>
					<li id="n-help"><a href="../Pomoć:Pomoć.html" title="Mjesto za pomoć suradnicima.">Pomoć</a></li>
				</ul>
			</div>
</div>

<!-- /navigation -->

<!-- SEARCH -->

<!-- /SEARCH -->

<!-- TOOLBOX -->
<div class="portal" id="p-tb">
	<h5>Traka s alatima</h5>
	<div class="body">
		<ul>
					<li id="t-whatlinkshere"><a href="http://security.foi.hr/wiki/index.php/Posebno:%C5%A0to_vodi_ovamo/O%C4%8Dvr%C5%A1%C4%87enje_GNU/Linux_baziranih_poslu%C5%BEitelja" title="Popis svih stranica koje sadrže poveznice ovamo [j]" accesskey="j">Što vodi ovamo</a></li>
						<li id="t-recentchangeslinked"><a href="http://security.foi.hr/wiki/index.php/Posebno:Povezane_promjene/O%C4%8Dvr%C5%A1%C4%87enje_GNU/Linux_baziranih_poslu%C5%BEitelja" title="Nedavne promjene na stranicama na koje vode ovdašnje poveznice [k]" accesskey="k">Povezane stranice</a></li>
																																										<li id="t-specialpages"><a href="../Posebno:Posebne_stranice.html" title="Popis posebnih stranica [q]" accesskey="q">Posebne stranice</a></li>
									<li id="t-print"><a href="http://security.foi.hr/wiki/index.php?title=O%C4%8Dvr%C5%A1%C4%87enje_GNU/Linux_baziranih_poslu%C5%BEitelja&amp;printable=yes" rel="alternate" title="Verzija za ispis ove stranice [p]" accesskey="p">Verzija za ispis</a></li>
						<li id="t-permalink"><a href="http://security.foi.hr/wiki/index.php?title=O%C4%8Dvr%C5%A1%C4%87enje_GNU/Linux_baziranih_poslu%C5%BEitelja&amp;oldid=33127" title="Trajna poveznica na ovu verziju stranice">Trajna poveznica</a></li>
						</ul>
	</div>
</div>

<!-- /TOOLBOX -->

<!-- LANGUAGES -->

<!-- /LANGUAGES -->
			</div>
		<!-- /panel -->
		<!-- footer -->
		<div id="footer">
											<ul id="footer-info">
																	<li id="footer-info-lastmod"> Datum zadnje promjene na ovoj stranici: 01:39, 20. siječnja 2015.</li>
																							<li id="footer-info-viewcount">Ova stranica je pogledana 676 puta.</li>
																							<li id="footer-info-copyright">Sadržaji se koriste u skladu s <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="external ">Creative Commons Attribution Share Alike</a>.</li>
															</ul>
															<ul id="footer-places">
																	<li id="footer-places-privacy"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:Za%C5%A1tita_privatnosti" title="SIS Wiki:Zaštita privatnosti">Zaštita privatnosti</a></li>
																							<li id="footer-places-about"><a href="../SIS_Wiki:O_projektu_SIS_Wiki.html" title="SIS Wiki:O projektu SIS Wiki">O projektu SIS Wiki</a></li>
																							<li id="footer-places-disclaimer"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:General_disclaimer" title="SIS Wiki:General disclaimer">Odricanje od odgovornosti</a></li>
															</ul>
											<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="../../skins/common/images/cc-by-sa.png" alt="Creative Commons Attribution Share Alike" width="88" height="31" /></a>
					</li>
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="../../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<!-- /footer -->
		
<script src="../../load.php%3Fdebug=false&amp;lang=hr&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if ( window.mediaWiki ) {
	mediaWiki.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "Očvršćenje_GNU/Linux_baziranih_poslužitelja", "wgTitle": "Očvršćenje GNU/Linux baziranih poslužitelja", "wgAction": "view", "wgArticleId": 7919, "wgIsArticle": true, "wgUserName": null, "wgUserGroups": ["*"], "wgCurRevisionId": 33127, "wgCategories": [], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": []});
}
</script>
<script>if ( window.mediaWiki ) {
	mediaWiki.loader.load(["mediawiki.util", "mediawiki.legacy.wikibits", "mediawiki.legacy.ajax"]);
	mediaWiki.loader.go();
}
</script>

<script>if ( window.mediaWiki ) {
	mediaWiki.user.options.set({"ccmeonemails":0,"cols":80,"contextchars":50,"contextlines":5,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,
	"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"hr","language":"hr","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;mediaWiki.loader.state({"user.options":"ready"});
}
</script>		<!-- fixalpha -->
		<script type="text/javascript"> if ( window.isMSIE55 ) fixalpha(); </script>
		<!-- /fixalpha -->
		<!-- Served in 0.317 secs. -->			</body>
</html>
