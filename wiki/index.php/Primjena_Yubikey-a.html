<!DOCTYPE html>
<html lang="hr" dir="ltr">
<head>
<meta charset="UTF-8" />
<title>Primjena Yubikey-a - SIS Wiki</title>
<meta name="generator" content="MediaWiki 1.17.0" />
<link rel="shortcut icon" href="http://security.foi.hr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="../opensearch_desc.php" title="SIS Wiki (hr)" />
<link rel="EditURI" type="application/rsd+xml" href="../api.php%3Faction=rsd" />
<link title="Creative Commons" type="application/rdf+xml" href="http://security.foi.hr/wiki/index.php?title=Primjena_Yubikey-a&amp;action=creativecommons" rel="meta" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="SIS Wiki Atom izvor" href="../index.php%3Ftitle=Posebno:Nedavne_promjene&amp;feed=atom" />
<link rel="stylesheet" href="../load.php%3Fdebug=false&amp;lang=hr&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cskins.vector&amp;only=styles&amp;skin=vector&amp;*.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/wiki/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr ns-0 ns-subject page-Primjena_Yubikey-a skin-vector">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<!-- content -->
		<div id="content">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading">Primjena Yubikey-a</h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
				<!-- tagline -->
				<div id="siteSub">Izvor: SIS Wiki</div>
				<!-- /tagline -->
				<!-- subtitle -->
				<div id="contentSub"></div>
				<!-- /subtitle -->
																<!-- jumpto -->
				<div id="jump-to-nav">
					Skoči na: <a href="Primjena_Yubikey-a.html#mw-head">orijentacija</a>,
					<a href="Primjena_Yubikey-a.html#p-search">traži</a>
				</div>
				<!-- /jumpto -->
								<!-- bodytext -->
				<p>Studenti: Ivan Ković, Tomislav Gec
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:Yubico.jpg" class="image"><img alt="Yubico.jpg" src="../images/thumb/8/88/Yubico.jpg/700px-Yubico.jpg" width="700" height="228" /></a>
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Sadržaj</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Primjena_Yubikey-a.html#Uvod"><span class="tocnumber">1</span> <span class="toctext">Uvod</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Primjena_Yubikey-a.html#Osnovni_pojmovi"><span class="tocnumber">2</span> <span class="toctext">Osnovni pojmovi</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="Primjena_Yubikey-a.html#Autentifikacija"><span class="tocnumber">2.1</span> <span class="toctext">Autentifikacija</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="Primjena_Yubikey-a.html#Dokaz_znanjem"><span class="tocnumber">2.1.1</span> <span class="toctext">Dokaz znanjem</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="Primjena_Yubikey-a.html#Dokaz_posjedovanjem"><span class="tocnumber">2.1.2</span> <span class="toctext">Dokaz posjedovanjem</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="Primjena_Yubikey-a.html#Dokaz_osobinom"><span class="tocnumber">2.1.3</span> <span class="toctext">Dokaz osobinom</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="Primjena_Yubikey-a.html#Vi.C5.A1efaktorska_autentifikacija"><span class="tocnumber">2.1.4</span> <span class="toctext">Višefaktorska autentifikacija</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="Primjena_Yubikey-a.html#Yubikey"><span class="tocnumber">3</span> <span class="toctext">Yubikey</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="Primjena_Yubikey-a.html#Glavna_obilje.C5.BEja"><span class="tocnumber">3.1</span> <span class="toctext">Glavna obilježja</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="Primjena_Yubikey-a.html#Na.C4.8Dini_generiranja_i_provjere_lozinki"><span class="tocnumber">3.2</span> <span class="toctext">Načini generiranja i provjere lozinki</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="Primjena_Yubikey-a.html#YubiKey_OTP"><span class="tocnumber">3.2.1</span> <span class="toctext">YubiKey OTP</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="Primjena_Yubikey-a.html#OATH-HOTP"><span class="tocnumber">3.2.2</span> <span class="toctext">OATH-HOTP</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="Primjena_Yubikey-a.html#Static_Password"><span class="tocnumber">3.2.3</span> <span class="toctext">Static Password</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="Primjena_Yubikey-a.html#Challenge_-_Response"><span class="tocnumber">3.2.4</span> <span class="toctext">Challenge - Response</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="Primjena_Yubikey-a.html#Sigurnost_YubiKey-a"><span class="tocnumber">3.3</span> <span class="toctext">Sigurnost YubiKey-a</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="Primjena_Yubikey-a.html#Koji_servisi_podr.C5.BEavaju_YubiKey.3F"><span class="tocnumber">3.4</span> <span class="toctext">Koji servisi podržavaju YubiKey?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="Primjena_Yubikey-a.html#Prakti.C4.8Dni_primjeri_primjene_Yubikey-a"><span class="tocnumber">4</span> <span class="toctext">Praktični primjeri primjene Yubikey-a</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="Primjena_Yubikey-a.html#Prijava_na_Gmail"><span class="tocnumber">4.1</span> <span class="toctext">Prijava na Gmail</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="Primjena_Yubikey-a.html#Programska_implementacija_autentifikacije_s_dva_faktora_uz_pomo.C4.87_YubiKey-a"><span class="tocnumber">4.2</span> <span class="toctext">Programska implementacija autentifikacije s dva faktora uz pomoć YubiKey-a</span></a>
<ul>
<li class="toclevel-3 tocsection-20"><a href="Primjena_Yubikey-a.html#Arhitektura_YubiKey_sustava_za_autentifikaciju"><span class="tocnumber">4.2.1</span> <span class="toctext">Arhitektura YubiKey sustava za autentifikaciju</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="Primjena_Yubikey-a.html#Analiza_YubiKey_OTP_lozinke"><span class="tocnumber">4.2.2</span> <span class="toctext">Analiza YubiKey OTP lozinke</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="Primjena_Yubikey-a.html#Detalji_implementacije_programskog_rje.C5.A1enja"><span class="tocnumber">4.2.3</span> <span class="toctext">Detalji implementacije programskog rješenja</span></a></li>
<li class="toclevel-3 tocsection-23"><a href="Primjena_Yubikey-a.html#Prikaz_rada_aplikacije"><span class="tocnumber">4.2.4</span> <span class="toctext">Prikaz rada aplikacije</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="Primjena_Yubikey-a.html#Zaklju.C4.8Dak"><span class="tocnumber">5</span> <span class="toctext">Zaključak</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="Primjena_Yubikey-a.html#Literatura"><span class="tocnumber">6</span> <span class="toctext">Literatura</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Uvod"> Uvod </span></h2>
<p>Nalazimo se u razdoblju u kojem je aktualni trend "cloud computing", te postoji jaka tendencija seljenju aplikacija koje su se tradicionalno izvodile na klijentskim računalima u oblak, odnosno "online". Takav način izvođenja aplikacija otvara nove mogućnosti kako razvojnim inženjerima i korisnicima, tako i onima koji žele te mogućnosti iskoristiti na način da ostvare osobne koristi na štetu drugih korisnika. S porastom broja aplikacija i drugih kvalitetnih sadržaja dostupnih online, raste i broj korisnika tih sadržaja. Analogno tome, raste i ukupna vrijednost informacija pohranjenih online, te su potrebni napredniji načini zaštite tih informacija od napadača. 
</p><p>U ovom radu objasniti ćemo kako možemo povećati sigurnost naših i tuđih korisničkih računa u online aplikacijama i servisima korištenjem uređaja <a href="http://www.yubico.com/yubikey" class="external text" rel="nofollow">YubiKey</a>. Navesti ćemo osnovna obilježja i mogućnosti tog uređaja, te ćemo u praktičnom dijelu rada pokazati kako se uređaj može iskoristiti s aspekta korisnika neke web usluge, i s aspekta programera koji bi želio povećati sigurnost sustava na kojem radi.
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Tomislav_gec&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Tomislav gec (stranica ne postoji)">Tomislav gec</a> 20:43, 11. siječnja 2013. (CET) 
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Ikovic&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Ikovic (stranica ne postoji)">Ikovic</a> 20:44, 11. siječnja 2013. (CET)
</p>
<h2> <span class="mw-headline" id="Osnovni_pojmovi"> Osnovni pojmovi </span></h2>
<p>Kako bi razumjeli točan način na koje se Yubikey uklapa u zaštitu korisničkih računa u online aplikacijama i servisima, moramo poznavati neke od osnovnih pojmova iz domene sigurnosti informacijskih sustava i kriptografije. Dakle, kada prosječan korisnik Interneta posjeti neku web stranicu (forum, društvena mreža, web aplikacija..), može imati neograničen ili ograničen pristup sadržajima te web stranice. U slučaju ograničenog pristupa, korisnik će se najčešće morati registrirati u sustav te će dobiti određene podatke pomoću kojih se mora prijaviti u sustav kako bi mu se omogućio pristup sadržajima te web stranice. Prilikom prijave u sustav, odvijaju se tri procesa: <b>identifikacija</b>, <b>autentifikacija</b> te <b>autorizacija</b>. Naravno, ti procesi nisu ograničeni samo na jednostruko izvođenje prilikom prijave, već se mogu po potrebi izvršiti više puta, i u različite svrhe.
</p><p><br />
Razlika između identifikacije, autentifikacije i autorizacije [1]:
</p><p>identifikacija   =  predstavljanje
</p><p>autentifikacija  =  identifikacija  + verifikacija
</p><p>autorizacija     =  autentifikacija + provjera ovlasti, tj. provjera prava pristupa
</p><p><br />
Korisnik se identificira prilikom unosa korisničkog imena. Proces autentifikacije zadužen je za provjeru ili potvrdu identiteta korisnika, te se od korisnika najčešće traži unos lozinke povezane s njegovim korisničkim imenom. Kada je identitet korisnika potvrđen, proces autorizacije nužan je kako bi se korisniku odredila odgovarajuća razina prava pristupa i modifikacije sadržaja web stranice. U ovom radu najviše ćemo se posvetiti problemu autentifikacije, budući da YubiKey najveću ulogu ima upravo u tom procesu. Potrebno je napomenuti da se pravilno konfiguriran uređaj bez problema može koristiti i za svrhe identifikacije i autorizacije, ali <i>out-of-the-box</i> uređaj primarno služi za autentifikaciju.
</p>
<h3> <span class="mw-headline" id="Autentifikacija"> Autentifikacija </span></h3>
<p>Autentifikacija se definira kao postupak provjere identiteta korisnika koji se provodi prije negoli se tom korisniku dopusti pristup resursima sustava. Cilj ovog postupka je onemogućavanje pristupa resursima neovlaštenim korisnicima sustava. Postupak se odvija u dvije faze: u prvoj fazi korisnik se prijavljuje u sustav te šalje svoje identifikacijske podatke, te se u drugoj fazi ti podaci provjeravaju te se na osnovu toga odbija ili dopušta pristup tom korisniku. Postoje tri osnovna pristupa autentifikaciji, ovisno o tome što služi kao dokaz identiteta osobe. Tako razlikujemo <b>dokaz znanjem</b>, <b>dokaz posjedovanjem</b>, te <b>dokaz osobinom</b>.
</p>
<h4> <span class="mw-headline" id="Dokaz_znanjem"> Dokaz znanjem </span></h4>
<p>U ovu kategoriju spadaju dokazi identiteta u obliku jedinstvenog znanja koje posjeduje korisnik. Takvi dokazi mogu biti lozinke, PIN-ovi, fraze, i slično. Postoje dva oblika ovakvog dokazivanja identiteta - u prvom slučaju korisnik šalje određeni podatak sustavu koji uspoređuje taj podatak s onim koji ima u bazi podataka vezan za tog korisnika te ovisno o tome podudaraju li se ti podaci daje ili odbija pristup sustavu. U drugom slučaju korisnik mora odgovoriti na određeno pitanje koje postavlja sustav. 
</p>
<h4> <span class="mw-headline" id="Dokaz_posjedovanjem"> Dokaz posjedovanjem </span></h4>
<p>Dokaz posjedovanjem čini određeni predmet u vlasništvu korisnika čijim se predočenjem ili korištenjem ostvaruje pristup sustavu. Ti predmeti mogu biti identifikacijske kartice, liste lozinki, USB uređaji, tokeni i slično. Ovakav koncept autentifikacije već se godinama koristi za zaštitu softvera od ilegalnog umnožavanja - određene složene aplikaciju za digitalnu obradu zvuka ne mogu se pokrenuti na računalu ukoliko u jednom od USB ulaza nije prisutan USB uređaj koji čini dokaz posjedovanjem. Na taj način, aplikacija se ne može koristiti čak i ako se kopira medij koji sadrži njenu instalaciju.
</p>
<h4> <span class="mw-headline" id="Dokaz_osobinom"> Dokaz osobinom </span></h4>
<p>Dokaz osobinom predstavlja dokazivanje identiteta korisnika prema onome što on je, odnosno prema nekim njegovim jedinstvenim biološkim obilježjima poput glasa, mrežnice ili otiska prsta. Ovakav način dokazivanja temelji se na biometriji, te još nije ušao u širu upotrebu zbog toga što je za prepoznavanje glasa, skeniranje mrežnice ili prepoznavanje otiska prsta potrebno posjedovanje i instaliranje dodatnog skupog i sofisticiranog hardvera na računalo, te bi uvođenje ove metode koja je potencijalno najsigurnija bilo poprilično skupo u ovom trenutku. 
</p>
<h4> <span class="mw-headline" id="Vi.C5.A1efaktorska_autentifikacija"> Višefaktorska autentifikacija </span></h4>
<p>U praksi se pokazalo da autentifikacija temeljena na jednom od gore navedenih dokaza ponekad nije dovoljna zaštita sama po sebi, te se uvodi pojam <b>višefaktorske autentifikacije</b>. Taj pojam se odnosi na autentifikaciju u kojoj korisnik mora pružiti dva ili sva tri tipa dokaza kako bi ostvario pristup sustavu. Najviša razina sigurnosti ostvaruje se korištenjem sva tri tipa dokaza, međutim takva trofaktorska autentifikacija se rijetko primjenjuje u praksi zbog financijskih ili praktičnih problema povezanih uz korištenje biometrijske opreme. Zbog toga je najčešći oblik praktične primjene upravo dvofaktorska autentifikacija, u kojoj se od korisnika sustava traže dokazi znanjem i dokazi posjedovanjem. U ovom seminarskom radu pokazati ćemo praktičnu primjenu Yubikey-a koji služi kao dokaz posjedovanjem.
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Ikovic&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Ikovic (stranica ne postoji)">Ikovic</a> 20:24, 11. siječnja 2013. (CET)
</p>
<h2> <span class="mw-headline" id="Yubikey"> Yubikey </span></h2>
<p><a href="http://security.foi.hr/wiki/index.php/Datoteka:YK_ina.jpg" class="image"><img alt="YK ina.jpg" src="../images/thumb/1/13/YK_ina.jpg/700px-YK_ina.jpg" width="700" height="177" /></a>
</p><p><br />
</p>
<h3> <span class="mw-headline" id="Glavna_obilje.C5.BEja"> Glavna obilježja </span></h3>
<p>Yubikey Standard [2] je uređaj jako malih dimenzija: težak je 3 grama, dok mu je debljina samo 2 milimetra. Kućište je čvrsto građeno, te proizvođač garantira vodootpornost. Iz perspektive korisnika jako je važna informacija da je kućište izrađeno od jednog dijela, te je jako otporno na savijanje, što je nužan preduvjet s obzirom na prenosivost uređaja. Sva svojstva, uključujući i izostanak baterije, upućuju na praktičnost te prenosivost uređaja, što ide na ruku njegovoj namjeni kao jednostavnom uređaju za dvofaktorsku autentifikaciju. Pritom može zamijeniti i više različitih uređaja koji služe za istu svrhu. Na računalo se spaja pomoću standardnog USB 2.0 ulaza, te ga računalo bez instalacije upravljačkog softvera prepoznaje kao tipkovnicu. U tom slučaju uređaj funkcionira samo kao generator OTP lozinki, te je za korištenje ostalih opcija ipak potrebno instalirati upravljački softver. Radi na svim najzastupljenijim softverskim platformama, to jest na operacijskim sustavima Windows, Linux, Mac, te na raznim web preglednicima poput Mozilla Firefox-a ili Google Chrome-a. Za osnovnu upotrebu nije potrebno instalirati softver na klijentsko računalo. U ovom trenutku, cijena jednog uređaja kupljenog izravno od proizvođača iznosi 20$ + trošak poštarine [8].
</p><p>Osim standardne verzije uređaja, postoje i razne inačice prilagođene određenom načinu upotrebe - <b>YubiKey Nano</b> nudi istu funkcionalnost kao i standardni model, ali je smješten u kućište koje u potpunosti stane unutar USB ulaza. <b>Yubikey RFID</b> uz standardne mogućnosti nudi i opciju identifikacije pomoću radijske veze. <b>Yubikey NEO</b> je namijenjen korištenju uz smartphone i tablet uređaje, te na razne načine doprinosi sigurnom izvođenju mobilnih aplikacija, s naglaskom na aplikacije pomoću kojih se vrše financijske transakcije.
</p><p>Uređaj se koristi tako da, kada je konfiguriran za upotrebu s nekom uslugom, pritiskom na integriranu tipku generira lozinku kao da je ona upisana putem tipkovnice. Takav način funkcioniranja ubrzava prijavljivanje u sustave koji koriste dvofaktorsku autentifikaciju, odnosno svaki oblik autentifikacije u kojima je potrebno unijeti određeni oblik lozinke. Način generiranja lozinke detaljnije je objašnjen u idućem potpoglavlju.
</p>
<h3> <span class="mw-headline" id="Na.C4.8Dini_generiranja_i_provjere_lozinki"> Načini generiranja i provjere lozinki </span></h3>
<p>Kao što smo već više puta spomenuli, osnovna funkcionalnost YubiKey-a je generiranje jednokratnih lozinki. Osim te funkcionalnosti, uređaj dolazi s konfiguracijskim opcijama koje uključuju: <b>OATH</b>, <b>Static Password</b> i <b>Challenge-Response</b> modove rada. Navedene funkcionalnosti su integrirane u uređaj, te se mogu koristiti s odgovarajućim servisima bez potrebe za posebnim konfiguriranjem uređaja, ili s jednostavnom konfiguracijom. Upravljački softver omogućava i izmjenu određenih parametara i konfiguracijskih opcija čime se otvaraju brojne mogućnosti za korištenje YubiKey-a i izvan servisa koji ga podržavaju već i s tvorničkim postavkama.
</p><p>S obzirom na to da računalo YubiKey prepoznaje kao USB tipkovnicu, lozinke koje YubiKey generira računalo tretira na isti način kao i nizove znakove koje unosimo pomoću tipkovnice. Zbog toga se pojavio problem <i>dvoznačnosti znakova</i>, budući da reprezentacija znakova lozinke ovisi o postavljenom jeziku za unos znakova unutar operacijskog sustava, ili pak o rasporedu znakova na tipkovnici (npr. QWERTY i QWERTZ tipkovnice). Da bi se izbjegla takva situacija, Yubico je modificirao heksadecimalni brojevni sustav kako bi bili sigurni da se unutar lozinki koriste isključivo jednoznačni znakovi, koji uvijek imaju jednaku vrijednost i reprezentaciju. Navedeni sustav logično su nazvali "<i><b>ModHex</b></i>" (engl. <i>Modified Hexadecimal</i>).
</p><p>Za svaki pojedini YubiKey vezan je jedan 128 bitni AES ključ. Taj ključ je tajan, te je poznat samo uređaju (ne zna ga niti vlasnik uređaja!) i validacijskom serveru. Postupak generiranja lozinke svodi se na to da korisnik aktivira uređaj dodirom na senzor, te se u tom trenutku generira niz bitova prema prethodno postavljenim parametrima. Taj niz se potom kriptira pomoću spomenutog AES ključa i algoritma, te se prije slanja znakova na računalo izvršava konverzija u ModHex format. Lozinka se unosi u klijentsku aplikaciju, koja provjerava ostale faktore autentifikacije, te u slučaju da su oni u redu, prosljeđuje primljenu lozinku validacijskom serveru. Na njemu se dobivena lozinka opet pretvara u niz bitova, te se dekriptira pomoću ključa koji se nalazi na tom serveru. Potom se analiziraju parametri lozinke, te ovisno o rezultatu vraćaju klijentskoj aplikaciji potvrdan ili negativan odgovor.
</p>
<h4> <span class="mw-headline" id="YubiKey_OTP">YubiKey OTP</span></h4>
<p>OTP (engl. <i>One Time Password</i>) ili jednokratna lozinka je lozinka koja se koristi ili vrijedi samo u jednoj sesiji ili transakciji. Na taj način se rješava veliki broj sigurnosnih problema povezanih sa statičkim lozinkama, ali praktički sa sobom povlači i korištenje dodatnog uređaja ili softvera koji generira takve lozinke. Prema tvorničkim postavkama, YubiKey generira lozinku reprezentiranu sa 44 znaka u ModHex formatu. U praktičnom dijelu rada detaljno ćemo opisati osnovna svojstva i konstrukciju ovih lozinki, te način na koji se ta svojstva koriste prilikom programske implementacije autentifikacije s više faktora uz pomoć YubiKey-a.
</p>
<h4> <span class="mw-headline" id="OATH-HOTP">OATH-HOTP</span></h4>
<p>YubiKey [3] osim standardne jednokratnke lozinke može generirati i OATH - HOTP lozinku. To je posebna vrsta jednokratne lozinke koja se ne generira pomoću YubiKey-evog OTP algoritma, već koristi HOTP (engl. <i>Hash-based Message Authentication Code</i>) algoritam prema standardu <a href="http://www.ietf.org/rfc/rfc4226.txt" class="external text" rel="nofollow">RFC 4226</a>. HOTP je temeljni algoritam u OATH (engl. <i>Open Authentication</i>) inicijativi čiji je cilj razvoj standardizirane infrastrukture za višefaktorsku autentifikaciju koristeći otvorene standarde. Pravilno konfiguriran YubiKey omogućuje iznimno brzu prijavu na servise koji koriste OATH standard. Uz instalaciju dodatnog softvera, moguće je koristiti i poboljšani TOTP algoritam (engl. <i>Time-based One-time Password Algorithm</i>), o kojem ćemo više reći u praktičnom dijelu rada.
</p>
<h4> <span class="mw-headline" id="Static_Password">Static Password</span></h4>
<p>YubiKey se može konfigurirati kako bi generirao dugu statičku lozinku umjesto jednokratne lozinke. Ova statička lozinka ne zahtijeva validacijski server i radi s uobičajenim "korisničko ime / lozinka" rješenjem. Lozinka može sadržavati bilo koju kombinaciju od 16 do 64 znakova i / ili brojeva. Promjena statičke lozinke se može postići 10 sekundi drugim pritiskom na gumb, kada se nasumično generira novi kod. Iako ima svoje prednosti u odnosu na klasičnu statičku lozinku koju stvara i pamti sami korisnik, ova se mogućnost ne uklapa potpuno u koncept autentifikacije s više faktora, ali je ipak sadržana u standardnoj funkcionalnosti uređaja.
</p>
<h4> <span class="mw-headline" id="Challenge_-_Response">Challenge - Response</span></h4>
<p>Ovaj način rada je ponešto drugačiji od ostalih, s obzirom na to da u ovom slučaju YubiKey tipično prvo od aplikacije prima 48 bitni niz znakova, tzv. "<i>Challenge</i>". Potom uređaj koristeći ugrađeni OTP algoritam konstruira 128 bitni odgovor ili "<i>Response</i>", koji se šalje serveru kako bi on potvrdio valjanost odgovora, a time i identitet korisnika, točnije činjenicu da osoba posjeduje valjani YubiKey povezan s odgovarajućim korisničkim računom. Ovakva funkcionalnost najbolje se koristi za svrhu autorizacije, što je i česta primjena u praksi, pogotovo kod Internet bankarstva s raznim tokenima. Na stranicama proizvođača moguće je pronaći korisničke upute za konfiguraciju uređaja za korištenje prilikom prijave na Windows 7 ili na neke popularne web aplikacije.
</p>
<h3> <span class="mw-headline" id="Sigurnost_YubiKey-a"> Sigurnost YubiKey-a </span></h3>
<p>Sigurnost YubiKey-a počiva na simetričnoj kriptografiji, odnosno na korištenju AES algoritma te ugrađenom 128 bitnom AES ključu, jedinstvenom za svaki uređaj. Pomoću takvog ključa generiraju se lozinke koje sadrže 32 znaka, te je maksimalni broj mogućih kombinacija znakova 3,402,823,669,209,384,634,633,746,074,317.7 * 10^8, ili približno 3 * 10^38 [2]. Prema podacima proizvođača, u slučaju <i>brute force</i> napada bilo bi potrebno 1000 računala koja bi paralelno testirala moguće kombinacije ključeva preko 10^18 godina kako bi se uspješno pronašao jedan AES ključ.
</p><p>Čak i u načinu rada sa statičkom lozinkom YubiKey nudi višu razinu sigurnosti - statičke lozinke u pravilu nisu duge, jer bi korisniku bilo teško pamtiti i upisivati dugu i kompleksnu lozinku. Međutim, YubiKey sam upisuje lozinku izravno u polje za unos, tako da ne postoji mogućnost pogrešnog unosa lozinke.
</p><p>Sami uređaj je izrađen na takav način da se osigura tajnost ugrađenog ključa, te je za otvaranje uređaja potrebna visoko sofisticirana oprema, s tim da ga je nemoguće ponovno upotrijebiti nakon tog procesa. U slučaju gubitka ili krađe, administrator jednostavno može onesposobiti taj uređaj. Ukoliko napadač ipak uspije na neki način otkriti vrijednost ključa, ne može tu vrijednost iskoristiti za sistematski proboj, odnosno ne može na osnovu tog ključa dobiti informacije o iti jednom drugom ključu koji sadrže Yubikey-evi.
</p><p>Budući da je vjerojatnost da će napadači saznati tajni ključ jako mala, jedina realna opcija za napadača i sigurnosni rizik za korisnika YubiKey-a predstavlja validacijski server u kojem se nalaze spremljeni svi tajni ključevi za YubiKey uređaje. Rizik postaje mnogo veći ako se za validaciju ne koristi Yubico server, nego proizvoljni server na koji je instaliran modul za validaciju. Trivijalni napad bio bi pomoću <i>phishing</i>-a, odnosno simuliranjem validacijskog servera.
</p>
<h3> <span class="mw-headline" id="Koji_servisi_podr.C5.BEavaju_YubiKey.3F"> Koji servisi podržavaju YubiKey? </span></h3>
<p>Zgodnu mogućnost Yubikey-a predstavlja i otvoreni način konfiguracije uređaja koji omogućuje integriranje Yubikey-a u mnoge sustave temeljene na dvofaktorskoj autentifikaciji koji nisu podržani prema tvorničkim postavkama uređaja. U ovom poglavlju reći ćemo koji su generički načini primjene Yubikey-a, te za koje ga se primjene može naknadno konfigurirati.
</p><p>Yubikey je moguće povezati s većinom web aplikacija ili servisa koji nude mogućnost dvofaktorske autentifikacije. Trenutno, neki od najpopularnijih web servisa koji to omogućuju su <i>Google/Gmail</i>, <i>LastPass</i>, <i>Facebook</i>, <i>Dropbox</i>, <i>Yahoo!Mail</i>, <i>Amazon Web Services</i>, te mnogi drugi [4]. Za neke od navedenih usluga nije moguće direktno integriranje uređaja, odnosno ipak je potrebno odraditi posebno konfiguriranje Yubikey-a za efektivno korištenje. Otvorenost softverske platforme Yubikey-a omogućuje dodavanje novih funkcionalnosti te podrške za rad sa sustavima koji u početku nisu bili predviđeni.
</p><p>S druge strane, postoji velika lista partnera tvrtke Yubico koji koriste određena rješenja te tvrtke koja uključuju direktno korištenje Yubikey-a. To su ponajviše velike poslovne organizacije, te se Yubikey u tom kontekstu koristi za logiranje na VPN, radne stanice, enkripciju diskova i slično. 
</p><p>Na web stranicama tvrtke Yubico moguće je pronaći detaljan <a href="http://wiki.yubico.com/wiki/index.php/Main_Page" class="external text" rel="nofollow">popis</a> partnera tvrtke, odnosno popis usluga za koje postoji službena podrška za korištenje Yubikey-a.
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Tomislav_gec&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Tomislav gec (stranica ne postoji)">Tomislav gec</a> 20:48, 11. siječnja 2013. (CET)
</p>
<h2> <span class="mw-headline" id="Prakti.C4.8Dni_primjeri_primjene_Yubikey-a"> Praktični primjeri primjene Yubikey-a </span></h2>
<p>U teorijskom dijelu rada spomenuli smo sve bitne značajke YubiKey-a, te ćemo u ovom dijelu rada pokazati na koji način se YubiKey može primijeniti u praksi. Identificirali smo dvije nama najzanimljivije skupine koje korištenje YubiKey-a promatraju iz različitih perspektiva: s jedne strane imamo <b>korisnike YubiKey</b>-a kojima je u interesu iskoristiti YubiKey za sigurnu autentifikaciju u što veći broj korištenih servisa, dok s druge strane imamo <b>razvojne inženjere</b> kojima je u interesu iskoristiti YubiKey kako bi korisnicima svojih servisa pružili što veću sigurnost.
</p><p>U ovom poglavlju obraditi ćemo po jedan scenarij za svaku grupu korisnika: iz perspektive običnog korisnika, demonstrirati ćemo konfiguriranje uređaja za prijavu na popularni servis Gmail, dok ćemo iz perspektive razvojnog inžinjera pokazati kako se autentifikacija pomoću YubiKey OTP-a može integrirati u već postojeći sustav autentifikacije.
</p>
<h3> <span class="mw-headline" id="Prijava_na_Gmail"> Prijava na Gmail </span></h3>
<p>YubiKey [5] nam omogućuje da prilikom prijave na neki Web servis koristimo autentifikaciju u dva koraka. U ovom konkretnom primjeru će biti objašnjeno kako to ostvariti prilikom prijave na Google-ov mail servis Gmail.
Prvi korak prilikom prijave na Gmail je dokaz znanjem koji je ostvaren pomoću upisa "Korisničkog imena" i "Zaporke". Kao drugi korak, korisnik može izabrati nekoliko načina. Drugi korak potvrde može biti kod koji Gmail šalje korisniku na mobilni telefon, QR kod čijim skeniranjem dobijemo generirani jednokratni kod ili kod generiran s nekog tokena. Ovdje je drugi korak ostvaren kao dokaz posjedovanjem, a ono što posjedujemo je Yubikey koji kod za drugi korak potvrde generira na sljedeći način:
</p><p>Yubikey može biti korišten jedino u OATH okruženju s dodatnom aplikacijom koja evidentira trenutno vrijeme (TOTP) i šalje ga Yubikeyu. On prima zahtjev i šalje odgovor kako bi se generirala TOTP vrijednost. Gmail koristi OATH standard kao i Yubikey, pa je njihova sinkronizacija moguća.
</p><p>Prvi korak je preuzimanje OATH znakovnog niza s Gmail-a, kako bi povezali Yubikey uređaj s Gmail uslugom i ostvarili autentifikaciju u dva koraka. Potrebno je odabrati postavke korisničkog računa i odabrati "Sigurnost". Tamo uključimo "Potvrdu u dva koraka" i odaberemo mobilni uređaj kao način ostvarenja autentifikacije. Prikaže nam se sljedeći prozor:
</p><p><br />
<a href="http://security.foi.hr/wiki/index.php/Datoteka:Kod.jpg" class="image"><img alt="Kod.jpg" src="../images/9/90/Kod.jpg" width="500" height="508" /></a>
</p><p><br />
Ispod QR koda kliknemo na link "Ne možete skenirati barkod" i prikaže nam se OATH znakovni niz u Base32 formatu. Yubico alat za konfiguraciju prepoznaje jedino kod u heksadecimalnom zapisu pa je ovaj dobiveni potrebno konvertirati:
</p><p><br />
<a href="http://security.foi.hr/wiki/index.php/Datoteka:Convert.jpg" class="image"><img alt="Convert.jpg" src="../images/thumb/8/81/Convert.jpg/500px-Convert.jpg" width="500" height="255" /></a>
</p><p><br />
Kada smo konvertirali kod, uključimo Yubico alat za konfiguraciju i odaberemo "Challenge-Response":
"The Challenge-Response" omogućuje programsku interakciju između klijentske aplikacije i YubiKey-a uz potporu korisničkog sučelja softvera. Kompatibilan je sa "Yubico OTP" i "HMAC-SHA1" modovima. 
</p><p>Ako se koristi "Yubico OTP" mod, on šalje šest bajtni zahtjev i stvara odgovor koristeći Yubico OTP algoritam. U ovom načinu rada, YubiKey koristi neka promjenjiva polja, pa time stvara drugačiji odgovor svaki put, čak i ako je isti zahtjev.
</p><p>"HMAC-SHA1" mod koji je korišten u ovom primjeru šalje 0-64 bajtni zahtjev i stvara HMAC koristeći HMAC-SHA1 algoritam u kombinaciji s 20 bajtnim tajnim ključem. U ovom načinu rada, YubiKey ne koristi promjenjiva polja i stoga generira identičan odgovor ako je zahtjev isti.
Mi ćemo odabrati HMAC-SHA1 kako bi sinkronizorali naš Gmail račun sa lozinkom koju će nam kao odgovor generirati Yubikey.
</p><p><br />
<a href="http://security.foi.hr/wiki/index.php/Datoteka:Cr.jpg" class="image"><img alt="Cr.jpg" src="../images/thumb/f/f2/Cr.jpg/700px-Cr.jpg" width="700" height="323" /></a>
</p><p><br />
Odaberemo "Configuration Slot" za Yubikey i u polje "Secret Key" zalijepimo preuzeti kod u heksadecimalnom obliku. Klikom na "Write Configuration", ispiše nam se jednokratna lozinka za početnu sinkronicaciju sa Gmail-om.
</p><p>Prilikom svake prijave nam je potreban Yubikey kako bi nam kreirao jednokratnu lozinku. Ali vrijednost koja je generirana u 12:00:01 mora biti različita od one koja je generirana u 12:00:31, s tim da se tolerira razmak unutar 30 sekundi.
S obzirom na to da Yubico nema bateriju i ne može pratiti trenutno vrijeme, za zahtjev koji šalje koristi TOTP (Time based One Time Password) algoritam. TOTP je proširenje gore navedenog HOTP algoritma koji se oslanja na korištenje točnog vremena kao ulaz za računanje kriptografskog sažetka (HMAC-SHA1). Stoga, kako bi stvorili TOTP odgovor koristeći YubiKey, Yubico je razvio malu aplikaciju koja šalje trenutno vrijeme na YubiKey. Aplikacija šalje trenutno vrijeme u OATH-TOTP formatu i prima natrag 160 bitni HMAC-SHA1 sažetak. Zatim ga obrađuje i prikazuje kao kod od 6 ili 8 znamenki.
</p><p>Sada je potrebno preuzeti navedenu aplikaciju koji će svaki puta obaviti "Challenge-Response" i generirati TOTP. Ikona alata je nakon instalacije postavljena u alatnu traku.
Kada se želimo prijaviti na Gmail korisnički račun, prvi korak je dokaz znanjem:
</p><p><br />
<a href="http://security.foi.hr/wiki/index.php/Datoteka:Prijava1.jpg" class="image"><img alt="Prijava1.jpg" src="../images/thumb/0/08/Prijava1.jpg/300px-Prijava1.jpg" width="300" height="257" /></a>
</p><p><br />
Zatim nam se prikazuje drugi prozor koji od nas traži novi kod. Kliknemo na Yubico TOTP generator i generiramo vremenski bazirani jednokratni kod:
</p><p><br />
<a href="http://security.foi.hr/wiki/index.php/Datoteka:Totp.jpg" class="image"><img alt="Totp.jpg" src="../images/thumb/9/94/Totp.jpg/300px-Totp.jpg" width="300" height="170" /></a>
</p><p><br />
Zatim upišemo generirani kod i ulazimo u Gmail uslugu:
</p><p><br />
<a href="http://security.foi.hr/wiki/index.php/Datoteka:Prijava2.jpg" class="image"><img alt="Prijava2.jpg" src="../images/f/f2/Prijava2.jpg" width="600" height="257" /></a>
</p><p><br />
Najbitniji dio autentifikacije u dva koraka je posjedovanje Yubikey uređaja. Kada je ispravno konfiguriran, pomoću njega dobivamo jednokratni vremenski bazirani kod za prijavu. Ako Yubikey nije umetnut u računalo, klikom na "Generate TOTP" dobiti ćemo upozorenje da Yubikey nije prisutan.
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Tomislav_gec&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Tomislav gec (stranica ne postoji)">Tomislav gec</a> 20:47, 11. siječnja 2013. (CET)
</p>
<h3> <span class="mw-headline" id="Programska_implementacija_autentifikacije_s_dva_faktora_uz_pomo.C4.87_YubiKey-a"> Programska implementacija autentifikacije s dva faktora uz pomoć YubiKey-a </span></h3>
<p>Za potrebe ovog projekta, izradili smo web aplikaciju u programskom jeziku PHP koja demonstrira primjenu autentifikacije s više faktora u realnom kontekstu. Aplikacija se sastoji od HTML forme za prijavu, PHP klase s YubiKey metodama, te PHP skripte koja testira podatke unešene u web formu pomoću metoda iz YubiKey klase. U polja unutar forme korisnik unosi svoje korisničko ime i lozinku, što predstavlja dokaz znanjem, i OTP generiran pomoću YubiKey-a, što predstavlja dokaz posjedovanjem. Ovisno o unešenim podacima, korisnikova prijava može biti odbačena ili prihvaćena. Aplikaciji se može pristupiti klikom na <a href="http://air2012.comule.com/SIS/forma.html" class="external text" rel="nofollow">link</a>, dok se PHP kod može vidjeti <a href="http://snipplr.com/view/69427/sis-20122013--primjena-yubikeya--tomislav-gec-ivan-kovi/" class="external text" rel="nofollow">ovdje</a>.
</p><p>Napomena: izvorni kod klase Yubikey.php je dostupan na službenoj stranici proizvođača Yubico, te je korišten u skladu s licencom GNU GPL v2, pod kojom je kod objavljen.
</p>
<h4> <span class="mw-headline" id="Arhitektura_YubiKey_sustava_za_autentifikaciju"> Arhitektura YubiKey sustava za autentifikaciju </span></h4>
<p>U uvodnom dijelu projekta opisali smo odvijanje provjere valjanosti OTP-a pomoću YubiKey validacijskog servera. Na web stranici proizvođača postoji opsežna dokumentacija koja u nekim slučajevima samo specificira zahtjeve koje je potrebno ispuniti kako bi se u određeni sustav integrirala provjera OTP-a, dok u drugim slučajevima zalazi u detalje implementacije u pojedinom programskom jeziku. Mi smo se koristili uputama navedenim u dokumentu "<i><b><a href="http://www.yubico.com/wp-content/uploads/2012/10/YubiKey-Authentication-Module-Design-Guideline-v1.0.pdf" class="external text" rel="nofollow">YubiKey Authentication Module Design Guideline</a></b></i>". Taj dokument sadrži smjernice o pravilnoj izradi modula za autentifikaciju neovisno o odabranom programskom jeziku. U svakom slučaju, sustav za autentifikaciju sastoji se od sljedećih djelova [6]:
</p><p><br /> 
<a href="http://security.foi.hr/wiki/index.php/Datoteka:YK_Arhitektura.png" class="image"><img alt="YK Arhitektura.png" src="../images/thumb/5/56/YK_Arhitektura.png/500px-YK_Arhitektura.png" width="500" height="157" /></a>
</p><p><i>YubiKey Authentication Module</i> dio je web aplikacije u kojem se nalaze komponente koje moraju od korisnika primiti tražene podatke (korisničko ime, lozinka, OTP), te na <i>YubiKey Validation Server</i> proslijediti OTP, na što server odgovara je li OTP u redu ili ne. Pritom je komponenta pod nazivom <i>Authentication Business Logic</i> odgovorna za odluku hoće li se nečiji korisnički podaci prihvatiti ili ne. U komponenti <i>YubiKey Client</i> se zapravo nalazi YubiKey Web API koji je dostupan u velikom broju programskih jezika, a mi smo se odlučili na PHP implementaciju. Prihvatili smo takav dizajn arhitekture, te se naš autentifikacijski modul sastoji od sljedećih komponenti:
</p><p><b>forma.html</b> - korisnik unosi username, password i OTP
</p><p><b>Yubikey.php</b> - YubiKey Web API, sadrži sve potrebne metode za provjeru svojstava OTP-a, prosljeđivanje zahtjeva validacijskom serveru te vraćanje odgovora u komponentu s poslovnim pravilima
</p><p><b>yubikeytest.php</b> - PHP skripta s poslovnim pravilima, koristi metode koje nudi API, ovisno o odgovoru potvrđuje ili odbija prijavu
</p><p>Realni sustav bi osim ovih komponenti sadržavao i bazu podataka u kojoj bi bili spremljeni korisnički podaci, te odgovarajuće module koji su zaštićeni ovim autentifikacijskim modulom.
</p>
<h4> <span class="mw-headline" id="Analiza_YubiKey_OTP_lozinke"> Analiza YubiKey OTP lozinke </span></h4>
<p>Kako bi se mogućnosti YubiKey Web API-a maksimalno iskoristile, osim arhitekture autentifikacijskog modula potrebno je poznavati i strukturu same OTP lozinke. Naime, takva lozinka se sastoji od više komponenti, te je bitno poznavati svaku od njih kako bi se znalo iskoristiti mogućnosti koje pružaju te komponente. Napominjem da ću se u ovoj analizi baviti samo strukturom OTP lozinke prema tvorničkim postavkama, budući da duljine pojedinih komponenti mogu varirati ovisno o konfiguraciji uređaja.
</p><p>Svaka OTP lozinka sadrži <b>fiksni</b> dio i <b>dinamični</b> dio. Fiksni dio najčešće čini prvih 12 znakova koji su prisutni u svakoj OTP lozinci koju generira pojedini YubiKey. Ti znakovi su jedinstveni za svaki YubiKey i služe kao <i>javni ID</i> tog uređaja. Taj podatak nije tajan i s jedne strane služi nama za povezivanje pojedinog korisnika s određenim YubiKey-em, a s druge strane služi validacijskom serveru kako bi pronašao odgovarajući AES ključ za dekripciju dinamičkog dijela lozinke.
</p><p>Dinamični dio lozinke je kriptirani niz znakova koji sadrže sljedeća polja:
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:YK_StrukturaOTP.png" class="image"><img alt="YK StrukturaOTP.png" src="../images/f/f4/YK_StrukturaOTP.png" width="700" height="150" /></a>
</p><p><b>Private ID</b> - ukoliko se koriste dijeljeni ključevi, ovo polje identificira korisnika koji je pokrenuo enkripciju, inače se mogu ostaviti nule
</p><p><b>Usage Counter</b> - brojač korištenja YubiKey-a (neovisno o načinu rada), mora se resetirati kada dođe do najviše vrijednosti (mala vjerojatnost događaja)
</p><p><b>Timestamp</b> - vremenski pečat, služi validacijskom serveru kako bi izračunao vrijeme između dva generiranja OTP-a unutar jedne sesije
</p><p><b>Session Usage Counter</b> - povećava se nakon svakog generiranja OTP-a
</p><p><b>Random Number</b> - slučajno generirani broj
</p><p><b>Checksum</b> - zaštitna suma
</p>
<h4> <span class="mw-headline" id="Detalji_implementacije_programskog_rje.C5.A1enja"> Detalji implementacije programskog rješenja </span></h4>
<p>Već smo ranije rekli da smo prihvatili Yubico-ove smjernice za izradu autentifikacijskog modula. Prema tome, prvi korak izgradnje modula bilo je pronalaženje YubiKey klijenta, odnosno PHP Web API-a koji obavlja komunikaciju s validacijskim serverom. Odlučili smo se na upotrebu API-a do kojeg se može doći klikom na <a href="https://github.com/rnavarro/yubikey-php" class="external text" rel="nofollow">link</a>. Na stranici proizvođača postojale su i druge implementacije YubiKey klijenta, ali smo se na ovakvu implementaciju odlučili prvenstveno zbog odlične dokumentiranosti te jednostavnosti uporabe.
</p><p>YubiKey Web API je zapravo PHP klasa koja nudi sljedeće metode:
</p><p><b>verify</b>(OTP) - ulazni parametar je OTP lozinka, provjerava ispravnost OTP-a i prosljeđuje ispravni OTP validacijskom serveru, vraća TRUE za uspješnu autentifikaciju, FALSE za neuspješnu
</p><p><b>getLastResponse</b>() - vraća odgovor servera prilikom posljednjeg pokušaja autentifikacije
</p><p><b>getTimestampTolerance</b>() - vraća vrijednost tolerancije na razlike u vrijednosti vremenskog pečata
</p><p><b>setTimestampTolerance</b>(int) - postavlja vrijednost tolerancije na razlike u vrijednosti vremenskog pečata na vrijednost parametra u sekundama
</p><p><b>getCurlTimeout</b> - vraća duljinu vremenskog perioda unutar kojeg se čeka na odgovor validacijskog servera
</p><p><b>setCurlTimeout</b>(int) - postavlja duljinu vremenskog perioda unutar kojeg se čeka na odgovor validacijskog servera vrijednost parametra u sekundama
</p><p>Osim navedenih javnih metoda, klasa sadrži konstruktor i nekoliko zaštićenih metoda koje se koriste prilikom provjere ispravnosti OTP-a. Naravno, kako bi koristili dostupne metode, prvo moramo instancirati klasu unutar naše PHP skripte, za što su nam potrebni parametri <b>Client Id</b> i <b>simetrični ključ</b>. Te podatke može dobiti svatko tko posjeduje YubiKey na <a href="https://upgrade.yubico.com/getapikey/" class="external text" rel="nofollow">ovoj</a> stranici. Instanciranje se onda vrši na sljedeći način:
</p>
<pre>
$apiID = 6044; 

$signatureKey = &quot;wSn5dVh1NIlk3qcWF4SsDveyY+o=&quot;; 

$token = new Yubikey($apiID, $signatureKey);
</pre>
<p>Ovih par linija koda nam omogućuju da u našoj PHP skripti koristimo metode iz YubiKey klase. Zapravo, jedina metoda koja nam je zaista potrebna je verify($otp), kojoj jednostavno proslijedimo OTP unešen preko HTML forme, te rezultat metode proslijedimo metodama s implementiranim poslovnim pravilima koje će odlučiti hoće li i u kolikoj mjeri omogućiti korisniku pristup ostalim modulima web aplikacije. Kod naše PHP skripte vidljiv je na <a href="http://snipplr.com/view/69427/sis-20122013--primjena-yubikeya--tomislav-gec-ivan-kovi/" class="external text" rel="nofollow">Snipplr-u</a>. 
</p><p>Za implementaciju ovakve autentifikacije u realni sustav, potrebno je zadovoljiti određene preduvjete: svi korisnici koji žele koristiti autentifikaciju s dva faktora pomoću YubiKey-a moraju u bazi podataka imati evidentiran njihov <i>Public_id</i>, zajedno s ostalim podacima poput lozinke i korisničkog imena. Ukoliko se na taj način nekog korisnika ne poveže s određenim YubiKey-em, svaki korisnik bi se u sustav mogao prijaviti pomoću bilo kojeg YubiKey-a. Zbog jednostavnosti, u našoj web aplikaciji nismo koristili bazu podataka, već smo unutar koda postavili <i>dummy</i> varijable, u koje bi se u realnom kontekstu mogli upisivati stvari podaci iz baze podataka, te bi u tom slučaju aplikacija bila potpuno funkcionalna. Zbog toga se u našu web aplikaciju moguće prijaviti samo s YubiKey-em čiji Public_id smo spremili unutar varijabli.
</p><p>Funkcioniranje naše demonstracijske aplikacije na pregledan način prikazano je donjim dijagramom toka.
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:YK-dt.png" class="image"><img alt="YK-dt.png" src="../images/thumb/f/f2/YK-dt.png/900px-YK-dt.png" width="900" height="306" /></a>
</p>
<h4> <span class="mw-headline" id="Prikaz_rada_aplikacije"> Prikaz rada aplikacije </span></h4>
<p>Rad s testnom aplikacijom je vrlo jednostavan - u odgovarajuća polja za unos potrebno je redom unijeti korisničko ime, lozinku i OTP lozinku. U ovom testnom scenariju svi podaci osim OTP-a su fiksni, te korisničko ime i lozinka glase "test". Statički dio lozinke je također povezan s korisničkim računom određenim danim podacima. Izgled login forme prikazan je na donjoj slici:
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:YK_Login.png" class="image"><img alt="YK Login.png" src="../images/thumb/a/a7/YK_Login.png/700px-YK_Login.png" width="700" height="218" /></a>
</p><p>Nakon unosa navedenih podataka, te generiranja lozinke pomoću YubiKey-a, klikom na gumb "Prijava" izvršava se provjera korisničkih podataka. Prvo se provjerava odgovaraju li korisničko ime i lozinka nekom od korisničkih računa u bazi podataka (u aplikaciji su hard-codirani dummy podaci), te se samo u slučaju ispravnih podataka provjerava je li i OTP u redu. U prvom slučaju smo unijeli sve točne podatke i dobili sljedeću poruku:
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:YK_OK.png" class="image"><img alt="YK OK.png" src="../images/thumb/3/3b/YK_OK.png/200px-YK_OK.png" width="200" height="122" /></a>
</p><p>Potom smo se vratili natrag na formu, te smo unijeli potpuno iste podatke kao i prošli put, pa nam je server vratio sljedeću poruku:
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:YK_Fail.png" class="image"><img alt="YK Fail.png" src="../images/thumb/c/ca/YK_Fail.png/250px-YK_Fail.png" width="250" height="118" /></a>
</p><p>Budući da smo imali točne podatke za login, validacijskom serveru proslijeđena je OTP lozinka na provjeru, te je on zaključio da OTP nije valjan jer smo ga već koristili, što je istina. Vratio nam je odgovarajuću poruku, te se na temelju poslovnih pravila odlučilo da se korisniku neće dati pristup aplikaciji. To je samo jedna od mogućih poruka koje server vraća u slučaju neispravne OTP lozinke, te nema smisla da navodimo primjer za svaki slučaj.
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Ikovic&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Ikovic (stranica ne postoji)">Ikovic</a> 20:23, 11. siječnja 2013. (CET)
</p>
<h2> <span class="mw-headline" id="Zaklju.C4.8Dak"> Zaključak </span></h2>
<p>Danas, kada su mnogi od naših privatnih podataka rasprostranjeni po Web-u, sigurnost je ono što je najbitnija stavka.
Ako se želimo dodatno zaštiti hardverom, YubiKey je potpuno praktično rješenje.
Malen i efektivan, on je dokaz posjedovanjem koji koristimo kako bi se autentificirali na neki servis.
Poput kućnog ključa koji nosimo uvijek u džepu, YubiKey je ključ našeg dijela Weba u kojem također ne želimo nepozvane goste.  
Gledajući sa financijskog aspekta, zanimljivo je pogledati "Total Cost of Ownership" istraživanje koje je proveo Yubico. Na donjoj slici su prikazani rezultati te studije [7]:
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:YK_TCO.png" class="image"><img alt="YK TCO.png" src="../images/thumb/f/f1/YK_TCO.png/900px-YK_TCO.png" width="900" height="358" /></a>
</p><p>Naveden je financijski trošak korištenja YubiKey-a u usporedbi s drugim hardverskim i softverskim tokenima i SMS-om na scenariju poduzeća s 5000 zaposlenih u periodu od 3 godine.
Način na koji je realiziran Yubikey u nekim stavkama drastično smanjuje financijski trošak. Konačni izračun pokazuje da je i cijena jedna od prednosti Yubikeya, a cijena je danas uz kvalitetu uvijek tema pregovora. Naravno, prikazane rezultate je potrebno uzeti sa zrnom soli jer je ipak riječ o promotivnom materijalu proizvođača.
</p><p>Nadamo se da smo kroz ovaj projekt prikazali sva bitna obilježja i načine primjene YubiKey-a, te da smo na taj način nekome pomogli u odluci treba li mu takav uređaj ili ne.
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Ikovic&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Ikovic (stranica ne postoji)">Ikovic</a> 20:45, 11. siječnja 2013. (CET)
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Tomislav_gec&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Tomislav gec (stranica ne postoji)">Tomislav gec</a> 20:46, 11. siječnja 2013. (CET)
</p>
<h2> <span class="mw-headline" id="Literatura"> Literatura </span></h2>
<ol><li> Budin, L., Golub M., Jakobović, D., Jelenković, L. (2010) <i>Operacijski sustavi</i>, Zagreb: Element, p. 283.
</li><li> The YubiKey Manual - Version: 2.2 (2010) <a href="http://static.yubico.com/var/uploads/pdfs/YubiKey_Manual_2010-09-16.pdf" class="external text" rel="nofollow">Web izvor</a> na 11.01.2013.
</li><li> Willis, N. (2010) <i>OATH: yesterday, today, and tomorrow</i>, <a href="http://lwn.net/Articles/419968/" class="external text" rel="nofollow">Web izvor</a> na 11.01.2013.
</li><li> Gordon, W. (2012) <i>Here's Everywhere You Should Enable Two-Factor Authentication Right Now</i>, <a href="http://lifehacker.com/5938565/heres-everywhere-you-should-enable-two+factor-authentication-right-now" class="external text" rel="nofollow">Web izvor</a> na 14.10.2012.
</li><li> Yubico - Using the YubiKey with Gmail’s 2 Step Verification (2012) <a href="http://www.yubico.com/wp-content/uploads/2012/10/Configure-Gmail-2FA-with-YubiKey.pdf" class="external text" rel="nofollow">Web izvor</a> na datum 05.01.2013.
</li><li> Yubico - YubiKey Authentication Module Design Guideline (2012) <a href="http://www.yubico.com/wp-content/uploads/2012/10/YubiKey-Authentication-Module-Design-Guideline-v1.0.pdf" class="external text" rel="nofollow">Web izvor</a> na datum 07.01.2013.
</li><li> Yubico - Total Cost of Ownership Study (2011) <a href="http://www.yubico.com/wp-content/uploads/2012/10/TCO-2011-09-30.pdf" class="external text" rel="nofollow">Web izvor</a> na datum 07.01.2013.
</li><li> Yubico - Cjenik, <a href="https://store.yubico.com/store/catalog/index.php?cPath=2" class="external text" rel="nofollow">Web izvor</a> na datum 11.01.2013.
</li></ol>
<p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Ikovic&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Ikovic (stranica ne postoji)">Ikovic</a> 20:45, 11. siječnja 2013. (CET)
</p><p>--<a href="http://security.foi.hr/wiki/index.php?title=Suradnik:Tomislav_gec&amp;action=edit&amp;redlink=1" class="new" title="Suradnik:Tomislav gec (stranica ne postoji)">Tomislav gec</a> 20:46, 11. siječnja 2013. (CET)
</p>
<!-- 
NewPP limit report
Preprocessor node count: 108/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key sisds:pcache:idhash:4402-0!*!0!!hr!2!edit=0 and timestamp 20190203204033 -->
<div class="printfooter">
Dobavljeno iz "<a href="Primjena_Yubikey-a.html">http://security.foi.hr/wiki/index.php/Primjena_Yubikey-a</a>"</div>
				<!-- /bodytext -->
								<!-- catlinks -->
				<div id='catlinks' class='catlinks catlinks-allhidden'></div>				<!-- /catlinks -->
												<div class="visualClear"></div>
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="mw-head" class="noprint">
			
<!-- 0 -->
<div id="p-personal" class="">
	<h5>Osobni alati</h5>
	<ul>
					<li  id="pt-login"><a href="http://security.foi.hr/wiki/index.php?title=Posebno:Prijava&amp;returnto=Primjena_Yubikey-a" title="Predlažemo Vam da se prijavite, ali nije obvezno. [o]" accesskey="o">Prijavi se</a></li>
			</ul>
</div>

<!-- /0 -->
			<div id="left-navigation">
				
<!-- 0 -->
<div id="p-namespaces" class="vectorTabs">
	<h5>Imenski prostori</h5>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="Primjena_Yubikey-a.html"  title="Pogledaj sadržaj [c]" accesskey="c">Članak</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://security.foi.hr/wiki/index.php?title=Razgovor:Primjena_Yubikey-a&amp;action=edit&amp;redlink=1"  title="Razgovor o stranici [t]" accesskey="t">Razgovor</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-variants" class="vectorMenu emptyPortlet">
		<h5><span>Inačice</span><a href="Primjena_Yubikey-a.html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
			</div>
			<div id="right-navigation">
				
<!-- 0 -->
<div id="p-views" class="vectorTabs">
	<h5>Pogledi</h5>
	<ul>
					<li id="ca-view" class="selected"><span><a href="Primjena_Yubikey-a.html" >Čitaj</a></span></li>
					<li id="ca-viewsource"><span><a href="http://security.foi.hr/wiki/index.php?title=Primjena_Yubikey-a&amp;action=edit"  title="Ova stranica je zaštićena. Možete pogledati izvorni kod. [e]" accesskey="e">Vidi izvor</a></span></li>
					<li id="ca-history" class="collapsible "><span><a href="http://security.foi.hr/wiki/index.php?title=Primjena_Yubikey-a&amp;action=history"  title="Ranije izmjene na ovoj stranici. [h]" accesskey="h">Vidi stare izmjene</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-cactions" class="vectorMenu emptyPortlet">
	<h5><span>Radnje</span><a href="Primjena_Yubikey-a.html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->

<!-- 2 -->
<div id="p-search">
	<h5><label for="searchInput">Traži</label></h5>
	<form action="http://security.foi.hr/wiki/index.php" id="searchform">
		<input type='hidden' name="title" value="Posebno:Traži"/>
				<input id="searchInput" name="search" type="text"  title="Pretraži ovaj wiki [f]" accesskey="f"  value="" />
		<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Kreni" title="Idi na stranicu s ovim imenom ako ona postoji" />
		<input type="submit" name="fulltext" class="searchButton" id="mw-searchButton" value="Traži" title="Traži ovaj tekst na svim stranicama" />
			</form>
</div>

<!-- /2 -->
			</div>
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="mw-panel" class="noprint">
				<!-- logo -->
					<div id="p-logo"><a style="background-image: url(../../images/osslogo.png);" href="../../wiki.html"  title="Glavna stranica"></a></div>
				<!-- /logo -->
				
<!-- navigation -->
<div class="portal" id='p-navigation'>
	<h5>Orijentacija</h5>
	<div class="body">
				<ul>
					<li id="n-mainpage-description"><a href="../../wiki.html" title="Posjeti glavnu stranicu [z]" accesskey="z">Glavna stranica</a></li>
					<li id="n-portal"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:Portal_zajednice" title="O projektu, što možete učiniti, gdje je što">Portal zajednice</a></li>
					<li id="n-currentevents"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:Novosti" title="O trenutačnim događajima">Aktualno</a></li>
					<li id="n-recentchanges"><a href="./Posebno:Nedavne_promjene.html" title="Popis nedavnih promjena u wikiju. [r]" accesskey="r">Nedavne promjene</a></li>
					<li id="n-randompage"><a href="./Posebno:Slučajna_stranica.html" title="Učitaj slučajnu stranicu [x]" accesskey="x">Slučajna stranica</a></li>
					<li id="n-help"><a href="./Pomoć:Pomoć.html" title="Mjesto za pomoć suradnicima.">Pomoć</a></li>
				</ul>
			</div>
</div>

<!-- /navigation -->

<!-- SEARCH -->

<!-- /SEARCH -->

<!-- TOOLBOX -->
<div class="portal" id="p-tb">
	<h5>Traka s alatima</h5>
	<div class="body">
		<ul>
					<li id="t-whatlinkshere"><a href="http://security.foi.hr/wiki/index.php/Posebno:%C5%A0to_vodi_ovamo/Primjena_Yubikey-a" title="Popis svih stranica koje sadrže poveznice ovamo [j]" accesskey="j">Što vodi ovamo</a></li>
						<li id="t-recentchangeslinked"><a href="http://security.foi.hr/wiki/index.php/Posebno:Povezane_promjene/Primjena_Yubikey-a" title="Nedavne promjene na stranicama na koje vode ovdašnje poveznice [k]" accesskey="k">Povezane stranice</a></li>
																																										<li id="t-specialpages"><a href="./Posebno:Posebne_stranice.html" title="Popis posebnih stranica [q]" accesskey="q">Posebne stranice</a></li>
									<li id="t-print"><a href="http://security.foi.hr/wiki/index.php?title=Primjena_Yubikey-a&amp;printable=yes" rel="alternate" title="Verzija za ispis ove stranice [p]" accesskey="p">Verzija za ispis</a></li>
						<li id="t-permalink"><a href="http://security.foi.hr/wiki/index.php?title=Primjena_Yubikey-a&amp;oldid=12347" title="Trajna poveznica na ovu verziju stranice">Trajna poveznica</a></li>
						</ul>
	</div>
</div>

<!-- /TOOLBOX -->

<!-- LANGUAGES -->

<!-- /LANGUAGES -->
			</div>
		<!-- /panel -->
		<!-- footer -->
		<div id="footer">
											<ul id="footer-info">
																	<li id="footer-info-lastmod"> Datum zadnje promjene na ovoj stranici: 16:41, 17. siječnja 2013.</li>
																							<li id="footer-info-viewcount">Ova stranica je pogledana 46.359 puta.</li>
																							<li id="footer-info-copyright">Sadržaji se koriste u skladu s <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="external ">Creative Commons Attribution Share Alike</a>.</li>
															</ul>
															<ul id="footer-places">
																	<li id="footer-places-privacy"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:Za%C5%A1tita_privatnosti" title="SIS Wiki:Zaštita privatnosti">Zaštita privatnosti</a></li>
																							<li id="footer-places-about"><a href="./SIS_Wiki:O_projektu_SIS_Wiki.html" title="SIS Wiki:O projektu SIS Wiki">O projektu SIS Wiki</a></li>
																							<li id="footer-places-disclaimer"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:General_disclaimer" title="SIS Wiki:General disclaimer">Odricanje od odgovornosti</a></li>
															</ul>
											<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="../skins/common/images/cc-by-sa.png" alt="Creative Commons Attribution Share Alike" width="88" height="31" /></a>
					</li>
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<!-- /footer -->
		
<script src="../load.php%3Fdebug=false&amp;lang=hr&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if ( window.mediaWiki ) {
	mediaWiki.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "Primjena_Yubikey-a", "wgTitle": "Primjena Yubikey-a", "wgAction": "view", "wgArticleId": 4402, "wgIsArticle": true, "wgUserName": null, "wgUserGroups": ["*"], "wgCurRevisionId": 12347, "wgCategories": [], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": []});
}
</script>
<script>if ( window.mediaWiki ) {
	mediaWiki.loader.load(["mediawiki.util", "mediawiki.legacy.wikibits", "mediawiki.legacy.ajax"]);
	mediaWiki.loader.go();
}
</script>

<script>if ( window.mediaWiki ) {
	mediaWiki.user.options.set({"ccmeonemails":0,"cols":80,"contextchars":50,"contextlines":5,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,
	"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"hr","language":"hr","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;mediaWiki.loader.state({"user.options":"ready"});
}
</script>		<!-- fixalpha -->
		<script type="text/javascript"> if ( window.isMSIE55 ) fixalpha(); </script>
		<!-- /fixalpha -->
		<!-- Served in 0.584 secs. -->			</body>
</html>
