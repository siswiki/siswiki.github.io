<!DOCTYPE html>
<html lang="hr" dir="ltr">
<head>
<meta charset="UTF-8" />
<title>Onion router(TOR) - SIS Wiki</title>
<meta name="generator" content="MediaWiki 1.17.0" />
<link rel="shortcut icon" href="http://security.foi.hr/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="../opensearch_desc.php" title="SIS Wiki (hr)" />
<link rel="EditURI" type="application/rsd+xml" href="../api.php%3Faction=rsd" />
<link title="Creative Commons" type="application/rdf+xml" href="http://security.foi.hr/wiki/index.php?title=Onion_router(TOR)&amp;action=creativecommons" rel="meta" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="SIS Wiki Atom izvor" href="../index.php%3Ftitle=Posebno:Nedavne_promjene&amp;feed=atom" />
<link rel="stylesheet" href="../load.php%3Fdebug=false&amp;lang=hr&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cskins.vector&amp;only=styles&amp;skin=vector&amp;*.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/wiki/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr ns-0 ns-subject page-Onion_router_TOR skin-vector">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<!-- content -->
		<div id="content">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading">Onion router(TOR)</h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
				<!-- tagline -->
				<div id="siteSub">Izvor: SIS Wiki</div>
				<!-- /tagline -->
				<!-- subtitle -->
				<div id="contentSub"></div>
				<!-- /subtitle -->
																<!-- jumpto -->
				<div id="jump-to-nav">
					Skoči na: <a href="Onion_router(TOR).html#mw-head">orijentacija</a>,
					<a href="Onion_router(TOR).html#p-search">traži</a>
				</div>
				<!-- /jumpto -->
								<!-- bodytext -->
				<p>Borna Farkaš, Matija Neđeral, Antonio Markoč, Mislav Šantek
</p><p><br />
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Sadržaj</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Onion_router(TOR).html#Anonimno_pretra.C5.BEivanje_Interneta"><span class="tocnumber">1</span> <span class="toctext">Anonimno pretraživanje Interneta</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Onion_router(TOR).html#Anonimna_mre.C5.BEa_Tor"><span class="tocnumber">2</span> <span class="toctext">Anonimna mreža Tor</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Onion_router(TOR).html#Skriveni_servisi"><span class="tocnumber">3</span> <span class="toctext">Skriveni servisi</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="Onion_router(TOR).html#Slabosti"><span class="tocnumber">4</span> <span class="toctext">Slabosti</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="Onion_router(TOR).html#OpenWrt"><span class="tocnumber">5</span> <span class="toctext">OpenWrt</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="Onion_router(TOR).html#Povijest_open_WRT-a"><span class="tocnumber">6</span> <span class="toctext">Povijest open WRT-a</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="Onion_router(TOR).html#.C5.A0to_je_OpenWrt.3F"><span class="tocnumber">7</span> <span class="toctext">Što je OpenWrt?</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="Onion_router(TOR).html#.C5.A0to_OpenWrt_nije.3F"><span class="tocnumber">8</span> <span class="toctext">Što OpenWrt nije?</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="Onion_router(TOR).html#Spajanje_na_ruter"><span class="tocnumber">9</span> <span class="toctext">Spajanje na ruter</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="Onion_router(TOR).html#Failsafe"><span class="tocnumber">10</span> <span class="toctext">Failsafe</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="Onion_router(TOR).html#Instalacija_i_konfiguracija_Tor-a_na_openWRT-u"><span class="tocnumber">11</span> <span class="toctext">Instalacija i konfiguracija Tor-a na openWRT-u</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="Onion_router(TOR).html#USB_storage"><span class="tocnumber">12</span> <span class="toctext">USB storage</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="Onion_router(TOR).html#Firmware_upgrade"><span class="tocnumber">13</span> <span class="toctext">Firmware upgrade</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="Onion_router(TOR).html#Bilje.C5.A1ke"><span class="tocnumber">14</span> <span class="toctext">Bilješke</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="Onion_router(TOR).html#Poveznice"><span class="tocnumber">15</span> <span class="toctext">Poveznice</span></a></li>
</ul>
</td></tr></table>
<h2> <span class="mw-headline" id="Anonimno_pretra.C5.BEivanje_Interneta"> <b>Anonimno pretraživanje Interneta</b> </span></h2>
<p>Anonimno pretraživanje Interneta se odnosi na korištenje mreže koje skriva identifikacijske informacije o korisniku od stranica koje korisnik posjećuje. Anonimno pretraživanje je moguće ostvariti pomoću proxy servera te ostalih programa anonimnosti kao što je Tor. Takvi programi šalju informacije preko niza usmjernika(routera) s ciljem skrivanja izvorišta i odredišta informacija. No, ne postoji potpuno jamstvo anonimnosti jer su ti programi podložni analizi prometa. Informacije sa proxy poslužitelja mogu tražiti vlasti pa ni na taj način ne ostvarujemo potpunu anonimnost. Ostale informacije poput kolačića ili dodataka za Internet preglednike(plugins) se mogu iskoristiti u svrhu otkrivanja identiteta korisnika bez obzira što je njegova IP adresa skrivena.
</p><p>Pri pregledavanju internetske stranice, IP adresa i ostale informacije postaju poznate poslužitelju. Korisnikovu IP adresu je moguće prikriti uporabom proxy poslužitelja koji zahtjev šalju poslužitelju koji je konačni cilj te na taj način izvorni zahtjev ne putuje izravno na ciljani poslužitelj od korisnika. Rezultat toga je da ciljani poslužitelj nema IP adresu korisnika već samo informacije o proxy poslužitelju koji je njemu poslao zahtjev.
</p><p>Mislav Šantek, Borna Farkaš
</p>
<h2> <span class="mw-headline" id="Anonimna_mre.C5.BEa_Tor"> Anonimna mreža Tor </span></h2>
<p>Tor(The Onion Router) je slobodni software koji omogućava anonimnost na Internetu i izbjegava cenzuru. Tor usmjerava mrežni promet preko volonterske mreže poslužitelja koju čini više od 500 poslužitelja s ciljem otežavanja otkrivanja lokacije korisnika.
</p><p>Pojam Onion routing označava aplikacijske slojeve enkripcije, ugniježđene poput slojeva luka, koji omogućavaju anonimnu komunikaciju. Tor kriptira izvorne podatke uključujući i IP adresu odredišta. Promet šalje preko niza slučajno odabranih Tor poslužitelja. Svaki od tih poslužitelja dekriptira samo jedan sloj enkripcije kako bi saznao adresu sljedećeg poslužitelja te njemu poslao preostale kriptirane podatke. Zadnji poslužitelj u nizu dekriptira najdublji sloj enkripcije i šalje početne, izvorne podatke do traženog odredišta bez otkrivanja IP adrese izvorišta jer ni taj poslužitelj ne zna tu adresu. Sljedeća slika prikazuje opisani način rada.
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:Na%C4%8Din_rada.jpg" class="image"><img alt="Način rada.jpg" src="../images/2/2a/Način_rada.jpg" width="505" height="319" /></a>
</p><p>Prilikom bilo kakve vrste komunikacije na Internetu, informacija o poslužitelju i klijentu poznata je svim prijenosnim uređajima na putu između poslužitelja i klijenta, odnosno njihovim vlasnicima.
</p><p>Kako je Internet nastao na ideji da se komunikacija ostvaruje putem paketa koji od polazišta do odredišta mogu putovati različitim putevima, tako se višestruko multipliciraju uređaji i njihovi vlasnici koji imaju informaciju o komunikaciji između klijenta i poslužitelja. Kako se ove informacije odnose na mrežni i transportni sloj, jednostavno je odrediti o kojoj se osobi radi.
</p><p>Američka mornarica (US NAVY) razvila je 1998. Onion routing protokol koji štiti privatnost komunikacije između pošiljatelja i primatelja. Onion routing je protokol koji obavlja enkripciju i dekripciju paketa na svakom pojedinom prijenosnom uređaju čime se u potpunosti gubi informacija o primatelju, pošiljatelju i sadržaju samog paketa, tj. informacija je zaštićena i u potpunosti anonimna.
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:Tor.png" class="image"><img alt="Tor.png" src="../images/1/1f/Tor.png" width="800" height="526" /></a>
</p><p>Gornja slika prikazuje kako se pojedini slojevi enkripcije "skidaju" pri prijenosu samog paketa.
</p><p>Mislav Šantek, Borna Farkaš
</p>
<h2> <span class="mw-headline" id="Skriveni_servisi"> Skriveni servisi </span></h2>
<p>Tor pruža anonimnost internetskim stranicama i drugim poslužiteljima. Poslužitelji ugođeni za primanje podataka za ulazne konekcije samo preko Tor-a se nazivaju skriveni servisi(hidden services). Kako ne bi IP adresa poslužitelja bila otkrivena, a tako i područje ne kojem se poslužitelj nalazi, za pristup poslužitelju se koristi onion adresa. Tor mreža razumije tu vrstu adresa i može usmjeravati promet prema i od skrivenih servisa pa čak i za one servise iza vatrozida ili NAT-a te na taj način osigurava anonimnost oba dvije strane. Baza koja sadrži opise skrivenih servisa je centralizirana, ali Tor je decentralizirani prema dizajnu te ne postoji izravno čitljivi popis svih skrivenih servisa. Problem su servisi koji su dostupni kroz Tor mrežu i preko javnog Interneta istovremeno jer oni nisu potpuno skriveni. Skrivenim servisima je moguće pristupiti i kroz standardni Internet preglednik bez client-side konekcije na Tor mrežu pomoću servisa kao Tor2web.
</p><p>Mislav Šantek, Borna Farkaš
</p>
<h2> <span class="mw-headline" id="Slabosti"> Slabosti </span></h2>
<p>Tor ne može ostvariti zaštitu od nadziranja prometa na rubu Tor mreže, tj. promet koji ulazi i izlazi iz mreže. Tor pruža zaštitu od analize prometa, no nije u mogućnosti spriječiti potvrđivanje prometa odnosno end-to-end correlation.
</p><p>Bez obzira na ove poznate slabosti Tor je znatno fleksibilnija mreža od VPN jer će napadač koji pokušava analizirati veličinu i vremena slanja kriptiranih podataka imati puno većih problema pri analizi.
</p><p>Ako se na oba dvije strane puta nalazi AS(Autonomous System), od klijenta do ulaznog čvora u Tor mrežu i od izlaznog čvora do odredišta, onda je moguće statistički povezati promet na ulazu i izlazu u cilju izračunavanja krajnjeg odredišta. LASTor je 2012. godine predložio način za predviđanje potencijalnih AS-ova na obje strane tijekom biranja putanje na klijentskoj strani u svrhu izbjegavanja ovog problema.
</p><p>Mislav Šantek, Borna Farkaš
</p>
<h2> <span class="mw-headline" id="OpenWrt"> OpenWrt </span></h2>
<p>OpenWrt je proširiv GNU / Linux distribucija za ugrađene uređaje (obični bežični usmjerivači). Za razliku od mnogih drugih distribucija za te routere, OpenWrt je izgrađen od temelja da bude potpuno opremljen, lako promjenjiv operativni sustav za vaš usmjerivač. U praksi, to znači da možete imati sve značajke koje su vam potrebne, pokreće ga Linux kernel koji je mlađi od većine drugih distribucija.
</p><p>Matija Neđeral, Antonio Markoč
</p>
<h2> <span class="mw-headline" id="Povijest_open_WRT-a">Povijest open WRT-a</span></h2>
<p>OpenWrt, u obliku kakav je danas, plod je velikog truda uloženog od skupine Linux entuzijasta. Njegovi počeci sežu od početka 2004. godine kada je tvrtka Linksys
predstavila uređaj pod nazivom WRT54G. Navedeni uređaj služio je kao centralna jedinica za dijeljenje konekcije između određenog broja računala. Nedugo nakon što je
uređaj postao dostupan korisnicima, Andrew Miklas primijetio je da navedeni uređaj koristi modificiranu Linux jezgru kao operacijski sustav koji ga pokreće. Po General
Public Licence (skr.GPL) licenci po kojoj je Linux jezgra dostupna u obliku slobodnog programskog koda, Linux jezgra ne smije se koristiti u komercijalne svrhe bez dijeljenja
tog programskog koda potrošaču proizvoda na kojem se koristi. Nakon što je Andrew Miklas poslao apel Linksys kompaniji da se korišteni kod objavi te kako nije bilo nikakvih
reakcija sa njihove strane, Andrew Miklas je incident prijavio na Linux grupu elektroničke pošte (engl. mailing list). Linksys tvrtka je uslijed pritiska Linux zajednice popustila te
je u javnost izašla Linux jezgra korištena na uređaju. U tom trenutku započinju različiti projekti koji svoj programski kod baziraju na onom koji je objavila Linksys tvrtka. Jedni
od popularnijih projekata su bili OpenWrt, DD-wrt, HyperWRT i projekt Sveasoft firme. Programski kod koji je izašao u javnost bila je uvelike modificirana Linux jezgra kao što se
i pretpostavljalo, no nekoliko ljudi brzo je uvidjelo bespotrebnost većine programskog koda u njemu. Nakon čišćenja nepotrebnih dijelova koda te ostavljanja samo dijelova koji
su najnužniji, veličina sustava pala je sa 30MB na oko 3MB te je ubrzo nakon toga, početkom 2004., napravljena i prva verzija sustava sa oznakom
build 1 . (skr. B1) koja nije bila javno dostupna. Sa daljnjim razvojem OpenWrt distribuciji dodana je mogućnost pisanja po disku koja u to vrijeme nije bila dostupna na konkurentskim projektima.
OpenWrt projekt je pod GPL licencom te je kao takav slobodni programski kod. Razvoj OpenWrt Linux distribucije potpomaže velika zajednica širom svijeta. 
</p><p>Antonio Markoč, Matija Neđeral
</p>
<h2> <span class="mw-headline" id=".C5.A0to_je_OpenWrt.3F"> Što je OpenWrt? </span></h2>
<p>Umjesto da pokušavate stvoriti jedan, statički firmware, OpenWrt pruža potpuno čitljiv datotečni sustav s dodatnim upravljanjem paketa. To vas oslobađa ograničenja u izboru aplikacija i konfiguracije od prodavatelja i omogućuje vam da koristite pakete da prilagodite ugrađen uređaj za različite namjene. Za programere, OpenWrt pruža okvir za izgradnju aplikacija bez potrebe za stvaranjem potpunog firmware-a. Za korisnike to znači slobodu za konfiguraciju uređaja, omogućujući korištenje uređaja na način koji prodavač ne može ni zamislili.
</p><p>Projekt je u potpunosti besplatan i open-source, licenciran pod GPL.Projekt je namijenjen da uvijek bude domaćin na lako dostupnom web site-u, s lako dostupnim izvornim kodom i lak za izgraditi.
Jednostavan i besplatan pristup.Projekt će uvijek biti otvoren za nove suradnike i imati nisku prepreku za sudjelovanje. Svatko će moći pridonijeti.
OpenWrt je odavno uspostavljen kao najbolji firmware rješenje u svojoj klasi. On daleko premašuje druga ugradbena rješenja u performansama, stabilnosti, proširivosti, robusnosti i dizajnu. OpenWrt je prije svega okvir za inovativna rješenja.
</p><p>Matija Neđeral, Antonio Markoč
</p>
<h2> <span class="mw-headline" id=".C5.A0to_OpenWrt_nije.3F"> Što OpenWrt nije? </span></h2>
<p>OpenWrt nije namijenjen da bude distribucija koju možete učitati na ugrađenim uređajem i očekivati da će učiniti sve što želite. Umjesto toga, OpenWrt okvir omogućuje vam da prilagodite svoje ugrađen operativni sustav s vlastitim potrebama. Možete dodati značajke koje koje trebate instaliranjem programskih paketa, kao što je grafičko web sučelje koje omogućuje jednostavan pristup za početnike. Ugradnja takvih paketa je jednostavna za naučiti, te zahtijeva minimalno razumijevanje OpenWrt sustava i Linux vještina.
</p><p>U usporedbi s drugim distribucijama, OpenWrt se također ne može smatrati samo kao "pravi firmware za krajnjeg korisnika". Mnogi korisnici traže visoku prilagodljivost koju OpenWrt pruža, ali postoje i druge distribucije (mnoge se temelje na OpenWrtu) koje nude potpunije značajke u glavnom paketu. Ove distribucije nude više od iskustva krajnjih korisnika. Ako želite potpuno proširiv Linux-temeljen operativni sustav za vaš uređaj, OpenWrt je savršen i lako ga je postaviti i naučiti se služiti njime.
</p><p>Matija Neđeral, Antonio Markoč
</p>
<h2> <span class="mw-headline" id="Spajanje_na_ruter"> Spajanje na ruter </span></h2>
<p>Default ip adresa je 192.168.1.1, na nju se spajamo preko Telneta ako password nije postavljen. Ako je password postavljen onda se spajamo preko SSH.
</p><p>Za spajanje na ruter najbolje je koristiti Putty. Inače password se može podesiti naredbom passwd, i nakon toga dva puta upišite zeljeni password. 
Warninge možete ignorirate jer ne utječu na postavljanje passworda.
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:Sli2.png" class="image"><img alt="Sli2.png" src="../images/2/2d/Sli2.png" width="501" height="448" /></a>
</p><p>Ukoliko ne znamo ip adresu možemo koristiti failsafe kako bi se spojili na ruter. Failsafe je opisan niže na ovoj stranici.
Ako ne želimo koristi failsafe možemo koristiti programe poput Angry-ip. Taj će program tražiti aktivne urađaje na rasponu adresa koje mi odredimo.
Mana ovog programa je što ukoliko otprilike ne znamo svoju adresu, pretraživanje većeg raspona predugo traje.
Još jedan program koji se često koriti je WireShark. Njega koristimo tako da "slušamo" vezu sa kojom se spajamo na ruter, npr. local area network.
Nakon što odaberemo vezu, moramo gledati Broadcast poruke, te tako možemo vidjeti sa koje nam ih adrese ruter šalje.
</p><p>Prije instalacije TOR-a moramo omogučiti ruteru pristup na Internet.
Najjednostavniji način je spojiti se na WAN. Za slučaj da nam WAN iz nekog razloga ne radi, možemo konfigurirati lan sa statičkom IP adresom i gatewayom od rutera koji je spojen na ADSL, također koristimo DNS podatke od adsl rutera. Najjednostavnije je konfigurirati /etc/config/network pomoću WinScp, program je sličan Putty, ali ima gui.
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:Sli3.png" class="image"><img alt="Sli3.png" src="../images/5/55/Sli3.png" width="609" height="420" /></a>
</p><p>U našem slučaju gateway je bio na 192.168.1.254, to možete doznati spajajući se laptopom na adsl ruter(wireless ili ethernet) i pod Connection status-&gt;details vidjeti koji vam je gateway.
Ako vam je mrsko raditi preko konzole, možete i instalirati GUI za openWRT.
Prvo moramo dohvatiti listu instalacijskih paketa sa OpenWRT servera.
</p>
<pre> opkg update
</pre>
<p>Nakon toga moramo instalirati Luci: 
</p>
<pre> opkg install luci
</pre>
<p>Luci koristi uhttpd servis pa ga moramo pokrenuti
/etc/init.d/uhttpd start
</p><p>Možemo postaviti i automatsko pokretanje servisa
/etc/init.d/uhttpd enable
</p><p>Ako je sve dobro prošlo, ovako bi trebao izgledati terminal
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:Sli4.png" class="image"><img alt="Sli4.png" src="../images/4/45/Sli4.png" width="608" height="302" /></a>
</p><p>I ovako broswer nakon što se spojite na 192.168.1.1, ili na kojoj vam je već adresi interface.
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:Sli5.png" class="image"><img alt="Sli5.png" src="../images/e/eb/Sli5.png" width="462" height="291" /></a>
</p>
<h2> <span class="mw-headline" id="Failsafe"> Failsafe </span></h2>
<p>U slučaju da ste krivo konfigurirali mrežne uređaje te se nemožete spojiti više na vaš ruter, najbolje je napraviti failsafe.
Resetirajte ruter i prilikom resetiranja rutera prije nego što se ruter do kraja pokrene potrebno je pritisnuti reset gumb. Ruter će ući u failsafe mode te se na njega tada može spojiti pomoću Telneta na adresi 192.168.1.1.
</p><p>Prvo napišemo(ukoliko to ne napišemo osim postavki, izbrisat će se i instalirani paketi)
</p>
<pre>  mount_root
</pre>
<p>A zatim
</p>
<pre> firstboot
</pre>
<p>I na kraju
</p>
<pre> reboot -f
</pre>
<p>Sve postavke će biti izbrisane
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:Failsafe.jpg" class="image"><img alt="Failsafe.jpg" src="../images/4/4a/Failsafe.jpg" width="599" height="438" /></a>
</p>
<h2> <span class="mw-headline" id="Instalacija_i_konfiguracija_Tor-a_na_openWRT-u"> Instalacija i konfiguracija Tor-a na openWRT-u </span></h2>
<p>Prvo moramo dohvatiti listu instalacijskih paketa sa OpenWRT servera.
</p>
<pre> opkg update
</pre>
<p>Nakon toga moramo instalirati Tor: 
</p>
<pre> opkg install tor
</pre>
<p>Ako je sve prošlo dobro, trebalo bi izgledati ovako.
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:Sli1.png" class="image"><img alt="Sli1.png" src="../images/1/1c/Sli1.png" width="609" height="546" /></a>
</p><p>Konfiguracija
Prvo konfiguriramo wireless mrežu, ustvari redoslijed nije bitan jer update radimo na kraju.
</p>
<pre>cat &lt;&lt; 'EOF' &gt; /etc/config/wireless
config wifi-device  radio0
   option type     mac80211
   option channel  11
   option phy phy0
   option hwmode   11ng
   option htmode   HT20
   list ht_capab   SHORT-GI-40
   list ht_capab   DSSS_CCK-40
config wifi-iface
   option device    radio0
   option network   transtor
   option mode    ap
   option ssid    'Transparent Tor'
   option encryption none
   option macaddr 00:88:88:88:00:2A # see <a href="http://outflux.net/geoloc/?mac=00-88-88-88-00-2A+" class="external free" rel="nofollow">http://outflux.net/geoloc/?mac=00-88-88-88-00-2A+</a> for the location info associated with this mac addr
EOF
</pre>
<p>Postavimo Tor u bridge mod i namjestimo ostale postavke: 
</p>
<pre>cat &lt;&lt; 'EOF' &gt; /etc/tor/torrc
User tor
RunAsDaemon 1
PidFile /var/run/tor.pid
DataDirectory /var/lib/tor
Nickname OpenWRTTorBridge
SocksPort 0
ORPort 443
BridgeRelay 1
Exitpolicy reject *:*
VirtualAddrNetwork 10.192.0.0/10
AutomapHostsOnResolve 1
TransPort 9040
TransListenAddress 192.168.2.1
DNSPort 9053
DNSListenAddress 192.168.2.1
#Bandwith koji tor koristi
RelayBandwidthRate 100 KBytes
RelayBandwidthBurst 200 KBytes
EOF
</pre>
<p>Ovo gore je početna postavka, bilo bi dobro dodati i 
Log notice file /var/log/tor/notices.log
Kako bi se lakše uočile eventualne pogreške, može se postaviti user na root tako da smanjimo moguće probleme
Namještavnja tor interfejsa: 
</p>
<pre>cat &lt;&lt; 'EOF' &gt;&gt; /etc/config/network
config interface transtor
       option ifname   "wlan0"
       option proto    static
       option ipaddr 192.168.2.1
       option netmask 255.255.255.0
EOF
</pre>
<p>Postavljanje DHCP servera: 
</p>
<pre>cat &lt;&lt; 'EOF' &gt;&gt; /etc/config/dhcp
config 'dhcp' 'transtor'
   option 'interface' 'transtor'
   option 'start' '23'
   option 'limit' '250'
   option 'leasetime' '12h'
EOF
Editiranje firewalla: 
cat &lt;&lt; 'EOF' &gt;&gt; /etc/config/firewall
config rule
       option src wan
       option proto tcp
       option dest_port 443
       option target ACCEPT
config zone
       option name     transtor
       option input    REJECT
       option output   ACCEPT
       option forward  REJECT
       option syn_flood 1
       option conntrack 1 #this setting is mandatory
config rule
       option src              transtor
       option proto            udp
       option dest_port        67
       option target           ACCEPT
config rule
       option src              transtor
       option proto            tcp
       option dest_port        9040
       option target           ACCEPT
config rule
       option src              transtor
       option proto            udp
       option dest_port        9053
       option target           ACCEPT
EOF
</pre>
<p>Podešavanje iptables: 
</p>
<pre>cat &lt;&lt; 'EOF' &gt;&gt; /etc/firewall.user
iptables -t nat -A PREROUTING -i wlan0 -p udp --dport 53 -j REDIRECT --to-ports 9053
iptables -t nat -A PREROUTING -i wlan0 -p tcp --dport&#160;! 53 --syn -j REDIRECT --to-ports 9040
EOF
</pre>
<p>Pokrenimo wifi: 
</p>
<pre> wifi
</pre>
<p>Ponovno učitajmo mrežne postavke: 
/etc/init.d/network reload
Resetiramo firewall: 
</p>
<pre> /etc/init.d/firewall reload
</pre>
<p>I pokrećemo TOR: 
</p>
<pre> /etc/init.d/tor start
</pre>
<p>Sa naredbom 
pidof TOR
Možemo provjeriti da li je TOR stvarno pokrenut, ako nije onda samo u konzolu upišite tor, na taj način bi trebao ispisati koje greške se javljaju prilikom pokretanja.
Također možete i u log-u(ako ste ga uključiti) provjeriti greške.
</p><p>Ovako izgleda log kada se tor uspješno pokrene.
Jan 14 13:06:22.000 [notice] Bootstrapped 100%: Done
Jan 14 13:06:22.000 [notice] Tor has successfully opened a circuit. Looks like client functionality is working.
</p>
<h2> <span class="mw-headline" id="USB_storage"> USB storage </span></h2>
<p>Za slučaj da vaš uređaj nema dovoljno memorije, možete ju dodati koristeći usb stick.
</p>
<pre>opkg update
opkg install kmod-usb-storage block-mount block-hotplug kmod-fs-ext4 kmod-fs-vfat kmod-nls-cp437 kmod-nls-iso8859-1
mkdir -p /mnt/usb
mount -t vfat /dev/sda1 /mnt/usb
</pre>
<p>Koristeći ove naredbe instalirat će se potpora za usb i vaš novi storage nalazit će se na lokaciji /mnt/usb.
Važno: za ove pakete potreban je najnoviji firmware!
</p>
<h2> <span class="mw-headline" id="Firmware_upgrade">Firmware upgrade</span></h2>
<p>Ukoliko je potrebno unaprijediti firmware to možete učiniti pomoću Luci.
Otvorite Luci (default 192.168.1.1) i otiđite na System-&gt;Backup/Flash Firmaware.
Ekran bi trebao izgledati ovako.
</p><p><a href="http://security.foi.hr/wiki/index.php/Datoteka:Firmware_top_upgrade.png" class="image"><img alt="Firmware top upgrade.png" src="../images/7/70/Firmware_top_upgrade.png" width="1212" height="714" /></a>
</p><p>Kliknite skroz dolje na „Browse“ i odaberite firmware koji želite instalirati. 
Preporučam da maknete kvačicu sa Keep settings kako bi instalacija uklonila sve prijašnje postavke.
Image možete pronaći ovdje <a href="http://wiki.openwrt.org/about/latest" class="external free" rel="nofollow">http://wiki.openwrt.org/about/latest</a>.
</p><p><br />
</p>
<h2> <span class="mw-headline" id="Bilje.C5.A1ke">Bilješke</span></h2>
<p>Pokretanje TOR-a nije do kraja uspjelo jer u našem slučaju ruter koji posjedujemo ima 64mb RAM-a, dok je za uspostavljanje TOR mreže potrebno min 256mb RAM-a. Kao zadnji pokušaj smo probali instalirati USB storage(i napravili firware upgrade) i prebaciti sve što TOR zapisuje na taj disk, to je uštedjelo 30-ak MB rama, ali ni to nije dovoljno da TOR ostane pokrenut. Preporučamo uređaj sa minimalno 256 MB rama kako bi sve prošlo glatko, a ne kao u našem slučaju.
</p><p><b>Napomena</b>
</p><p>Praktični dio je u potpunosti rađen skupno, dakle sudjelovali su svi članovi tima u njegovoj izradi.
</p>
<h2> <span class="mw-headline" id="Poveznice"> Poveznice </span></h2>
<p><a href="http://en.wikipedia.org/wiki/Anonymous_web_browsing" class="external text" rel="nofollow">Anonymous_web_browsing</a>
</p><p><a href="http://en.wikipedia.org/wiki/Tor_%28anonymity_network%29" class="external text" rel="nofollow">Anonymity_network</a>
</p><p><a href="http://wiki.openwrt.org/about/start" class="external text" rel="nofollow">OpenWrt</a>
</p><p><a href="http://sistemac.srce.unizg.hr/index.php?id=35&amp;no_cache=1&amp;tx_ttnews%5Btt_news%5D=860" class="external text" rel="nofollow">TOR - zaštita komunikacije Internetom</a>
</p>
<!-- 
NewPP limit report
Preprocessor node count: 59/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key sisds:pcache:idhash:7977-0!*!0!!hr!2!edit=0 and timestamp 20190203204259 -->
<div class="printfooter">
Dobavljeno iz "<a href="Onion_router(TOR).html">http://security.foi.hr/wiki/index.php/Onion_router(TOR)</a>"</div>
				<!-- /bodytext -->
								<!-- catlinks -->
				<div id='catlinks' class='catlinks catlinks-allhidden'></div>				<!-- /catlinks -->
												<div class="visualClear"></div>
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="mw-head" class="noprint">
			
<!-- 0 -->
<div id="p-personal" class="">
	<h5>Osobni alati</h5>
	<ul>
					<li  id="pt-login"><a href="http://security.foi.hr/wiki/index.php?title=Posebno:Prijava&amp;returnto=Onion_router(TOR)" title="Predlažemo Vam da se prijavite, ali nije obvezno. [o]" accesskey="o">Prijavi se</a></li>
			</ul>
</div>

<!-- /0 -->
			<div id="left-navigation">
				
<!-- 0 -->
<div id="p-namespaces" class="vectorTabs">
	<h5>Imenski prostori</h5>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="Onion_router(TOR).html"  title="Pogledaj sadržaj [c]" accesskey="c">Članak</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://security.foi.hr/wiki/index.php?title=Razgovor:Onion_router(TOR)&amp;action=edit&amp;redlink=1"  title="Razgovor o stranici [t]" accesskey="t">Razgovor</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-variants" class="vectorMenu emptyPortlet">
		<h5><span>Inačice</span><a href="Onion_router(TOR).html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
			</div>
			<div id="right-navigation">
				
<!-- 0 -->
<div id="p-views" class="vectorTabs">
	<h5>Pogledi</h5>
	<ul>
					<li id="ca-view" class="selected"><span><a href="Onion_router(TOR).html" >Čitaj</a></span></li>
					<li id="ca-viewsource"><span><a href="http://security.foi.hr/wiki/index.php?title=Onion_router(TOR)&amp;action=edit"  title="Ova stranica je zaštićena. Možete pogledati izvorni kod. [e]" accesskey="e">Vidi izvor</a></span></li>
					<li id="ca-history" class="collapsible "><span><a href="http://security.foi.hr/wiki/index.php?title=Onion_router(TOR)&amp;action=history"  title="Ranije izmjene na ovoj stranici. [h]" accesskey="h">Vidi stare izmjene</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-cactions" class="vectorMenu emptyPortlet">
	<h5><span>Radnje</span><a href="Onion_router(TOR).html#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->

<!-- 2 -->
<div id="p-search">
	<h5><label for="searchInput">Traži</label></h5>
	<form action="http://security.foi.hr/wiki/index.php" id="searchform">
		<input type='hidden' name="title" value="Posebno:Traži"/>
				<input id="searchInput" name="search" type="text"  title="Pretraži ovaj wiki [f]" accesskey="f"  value="" />
		<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Kreni" title="Idi na stranicu s ovim imenom ako ona postoji" />
		<input type="submit" name="fulltext" class="searchButton" id="mw-searchButton" value="Traži" title="Traži ovaj tekst na svim stranicama" />
			</form>
</div>

<!-- /2 -->
			</div>
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="mw-panel" class="noprint">
				<!-- logo -->
					<div id="p-logo"><a style="background-image: url(../../images/osslogo.png);" href="../../wiki.html"  title="Glavna stranica"></a></div>
				<!-- /logo -->
				
<!-- navigation -->
<div class="portal" id='p-navigation'>
	<h5>Orijentacija</h5>
	<div class="body">
				<ul>
					<li id="n-mainpage-description"><a href="../../wiki.html" title="Posjeti glavnu stranicu [z]" accesskey="z">Glavna stranica</a></li>
					<li id="n-portal"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:Portal_zajednice" title="O projektu, što možete učiniti, gdje je što">Portal zajednice</a></li>
					<li id="n-currentevents"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:Novosti" title="O trenutačnim događajima">Aktualno</a></li>
					<li id="n-recentchanges"><a href="./Posebno:Nedavne_promjene.html" title="Popis nedavnih promjena u wikiju. [r]" accesskey="r">Nedavne promjene</a></li>
					<li id="n-randompage"><a href="./Posebno:Slučajna_stranica.html" title="Učitaj slučajnu stranicu [x]" accesskey="x">Slučajna stranica</a></li>
					<li id="n-help"><a href="./Pomoć:Pomoć.html" title="Mjesto za pomoć suradnicima.">Pomoć</a></li>
				</ul>
			</div>
</div>

<!-- /navigation -->

<!-- SEARCH -->

<!-- /SEARCH -->

<!-- TOOLBOX -->
<div class="portal" id="p-tb">
	<h5>Traka s alatima</h5>
	<div class="body">
		<ul>
					<li id="t-whatlinkshere"><a href="http://security.foi.hr/wiki/index.php/Posebno:%C5%A0to_vodi_ovamo/Onion_router(TOR)" title="Popis svih stranica koje sadrže poveznice ovamo [j]" accesskey="j">Što vodi ovamo</a></li>
						<li id="t-recentchangeslinked"><a href="http://security.foi.hr/wiki/index.php/Posebno:Povezane_promjene/Onion_router(TOR)" title="Nedavne promjene na stranicama na koje vode ovdašnje poveznice [k]" accesskey="k">Povezane stranice</a></li>
																																										<li id="t-specialpages"><a href="./Posebno:Posebne_stranice.html" title="Popis posebnih stranica [q]" accesskey="q">Posebne stranice</a></li>
									<li id="t-print"><a href="http://security.foi.hr/wiki/index.php?title=Onion_router(TOR)&amp;printable=yes" rel="alternate" title="Verzija za ispis ove stranice [p]" accesskey="p">Verzija za ispis</a></li>
						<li id="t-permalink"><a href="http://security.foi.hr/wiki/index.php?title=Onion_router(TOR)&amp;oldid=33317" title="Trajna poveznica na ovu verziju stranice">Trajna poveznica</a></li>
						</ul>
	</div>
</div>

<!-- /TOOLBOX -->

<!-- LANGUAGES -->

<!-- /LANGUAGES -->
			</div>
		<!-- /panel -->
		<!-- footer -->
		<div id="footer">
											<ul id="footer-info">
																	<li id="footer-info-lastmod"> Datum zadnje promjene na ovoj stranici: 08:30, 20. siječnja 2015.</li>
																							<li id="footer-info-viewcount">Ova stranica je pogledana 4.706 puta.</li>
																							<li id="footer-info-copyright">Sadržaji se koriste u skladu s <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="external ">Creative Commons Attribution Share Alike</a>.</li>
															</ul>
															<ul id="footer-places">
																	<li id="footer-places-privacy"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:Za%C5%A1tita_privatnosti" title="SIS Wiki:Zaštita privatnosti">Zaštita privatnosti</a></li>
																							<li id="footer-places-about"><a href="./SIS_Wiki:O_projektu_SIS_Wiki.html" title="SIS Wiki:O projektu SIS Wiki">O projektu SIS Wiki</a></li>
																							<li id="footer-places-disclaimer"><a href="http://security.foi.hr/wiki/index.php/SIS_Wiki:General_disclaimer" title="SIS Wiki:General disclaimer">Odricanje od odgovornosti</a></li>
															</ul>
											<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="../skins/common/images/cc-by-sa.png" alt="Creative Commons Attribution Share Alike" width="88" height="31" /></a>
					</li>
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="../skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<!-- /footer -->
		
<script src="../load.php%3Fdebug=false&amp;lang=hr&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if ( window.mediaWiki ) {
	mediaWiki.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "Onion_router(TOR)", "wgTitle": "Onion router(TOR)", "wgAction": "view", "wgArticleId": 7977, "wgIsArticle": true, "wgUserName": null, "wgUserGroups": ["*"], "wgCurRevisionId": 33317, "wgCategories": [], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": []});
}
</script>
<script>if ( window.mediaWiki ) {
	mediaWiki.loader.load(["mediawiki.util", "mediawiki.legacy.wikibits", "mediawiki.legacy.ajax"]);
	mediaWiki.loader.go();
}
</script>

<script>if ( window.mediaWiki ) {
	mediaWiki.user.options.set({"ccmeonemails":0,"cols":80,"contextchars":50,"contextlines":5,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,
	"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"hr","language":"hr","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false});;mediaWiki.loader.state({"user.options":"ready"});
}
</script>		<!-- fixalpha -->
		<script type="text/javascript"> if ( window.isMSIE55 ) fixalpha(); </script>
		<!-- /fixalpha -->
		<!-- Served in 0.345 secs. -->			</body>
</html>
